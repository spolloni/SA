\documentclass[12pt]{article}

% TEMPLATE DEFAULT PACKAGES
\usepackage{amssymb,amsmath,amsfonts,eurosym,geometry,ulem,graphicx,color,setspace,sectsty,comment,natbib,pdflscape,array,adjustbox}

% ADDED PACKAGES FOR THIS MANUSCRIPT
\usepackage{palatino,newtxmath,multirow,titlesec,threeparttable,tabu,booktabs,titlesec,threeparttable,mathtools,bm,bbm,subcaption,pdflscape,tcolorbox,mathrsfs,tikz}
% endfloat,
\usepackage{tikzpagenodes}
\usepackage{pbox}

\usepackage{afterpage}
\usepackage[hyphens]{url}
\usepackage[margin=1cm]{caption}

\usepackage[draft]{hyperref}
\newcommand{\tim}{$\,\times\,$}
% FIGURES & TABLES CAPTION STYLING
\captionsetup[figure]{labelfont={bf},name={Figure},labelsep=period}
\captionsetup[table]{labelfont={bf},name={Table},labelsep=period}

% SECTION TITLE SETTINGS
\titlelabel{\thetitle.\enskip}
\titleformat*{\section}{\large\bfseries}
\titleformat*{\subsection}{\normalsize\bfseries}

% COLUMN TYPES
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}{>{\centering\arraybackslash}p{5.2em}}
\newcolumntype{D}{>{\centering\arraybackslash}p{5em}}
\newcolumntype{G}{>{\centering\arraybackslash}p{6em}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}


% MARGINS AND SPACING
\normalem
\geometry{left=1.1in,right=1.1in,top=1.0in,bottom=1.0in}
\setlength{\parskip}{2.5pt}

% SPECIAL CELL 
\newcommand{\specialcell}[2][c]{%
	\begin{tabular}[#1]{@{}l@{}}#2\end{tabular}}

% NO INDENT ON FOOTNOTES
\usepackage[hang,flushmargin]{footmisc}




\begin{document}

\begin{titlepage} 
\title{{Public Housing Spillovers in a Developing Country}\thanks{We are grateful to Andrew Foster, Daniel Bjorkegren, Matthew Turner, Jesse Shapiro, Brian Knight, and John Friedman for their feedback and advice.  We also thank Adelaide Steedley and the Centre for Affordable Housing and Finance in Africa as well as GeoTerraImage for generous research guidance and for providing data without which this project would not have been possible.  Any opinions and conclusions expressed herein are those of the authors and do not necessarily represent the views of the Federal Trade Commission or its Commissioners.}}
\author{\\[3em] Benjamin Bradlow\thanks{Dept. of Sociology, Brown University, Providence, RI  E-mail: benjamin\textunderscore bradlow@brown.edu}\\
 Stefano Polloni\thanks{Mapdwell, Cambridge, MA.  E-mail: stefano\textunderscore polloni@alumni.brown.edu}\\ 
  William Violette\thanks{Federal Trade Commission, Washington, DC. E-mail: william.j.violette@gmail.com} \\
 \\ 
  }
% \vspace{30mm}
\date{\vspace{5mm}This Version: \today}
\maketitle
\begin{abstract}

%%% STATEMENT HERE!  

	%Does subsidized housing improve neighborhood quality in developing countries? 

	% Public housing projects may complement local housing investments as well as substitute for existing housing, especially low-quality slums.  

	We estimate the spillover effects of large public housing projects in South Africa using aerial measures of housing density, property transaction records, and census data.  We compare (1) constructed projects versus planned but unconstructed projects, (2) before versus after scheduled construction, and (3) areas nearby versus far from project footprints.  Projects increase the quantity and quality of formal housing within their footprints.  Between 0 and 500 meters outside of their footprints, projects generate declines in informal housing quantity and formal housing prices.  Estimates from a structural model of housing markets suggest that projects are negative amenities generating net losses in welfare.

%%%%%% MACRO THE HETEROGENEITY DISTANCE
%Within project footprints, housing quality improves and subsidized formal structures successfully crowd-out slums. 


\vspace{.1in}
\textbf{Keywords:} housing policy; place-based policy; urban development.\\
% \vspace{0in}\\
\textbf{JEL Codes:} O18; O22; H4; R3.  \\
\bigskip
\end{abstract}
\setcounter{page}{0}
\thispagestyle{empty}
\end{titlepage}
% \pagebreak \newpage

\spacing{1.4}
\section{Introduction} \label{sec:introduction}



30\% of urban populations in developing countries live in slums often characterized by overcrowding, poor infrastructure access, and dwellings made of non-durable material \citep{mdg}.  While many cities lack the resources to target slum growth directly, some cities have responded by replacing slums with large public housing projects.  These projects aim not only to improve local housing conditions, but also to spur investment in surrounding neighborhoods.\footnote{For example, the South African Department of Housing promotes ``accelerating the delivery of housing as a key strategy for poverty alleviation,'' while also ``utilizing housing as an instrument for the development of sustainable human settlements, in support of spatial restructuring'' \citep{bng}.}  By providing new formal houses and improved infrastructure, housing projects may generate positive neighborhood amenities.  Projects may also have unintended consequences by attracting growth of low-quality, informal dwellings in the backyards of project houses \citep{Brueckner2018backyarding}.  Dense backyard dwellings may recreate slum conditions and depress neighborhood property investment.  The net spillover effects of housing projects remain an empirical question that has important implications for designing place-based policies that address slum growth.

This paper analyzes the spillover effects of large-scale public housing projects both within their footprints and within their surrounding neighborhoods.  We focus on South Africa's National Housing Program, which is unique among developing countries for its massive scale having allocated over 3 million houses across hundreds of projects since 1994.  This large volume of projects allows us to identify spatial impacts, building on existing research which is largely limited to considering outcomes for direct project recipients.\footnote{\cite{cattaneo2009housing} estimate child health improvements from housing upgrades in Mexico, \cite{franklin2016enabled} finds greater women's employment for public housing recipients in South Africa, and \cite{galiani2017shelter} combine housing projects from throughout Latin America, finding large improvements in reported well-being of households.}  

To measure these impacts, we compile detailed spatial data for the Johannesburg metro-area including aerial measures of formal and informal houses, census data, as well as deeds records of formal housing transactions.  We find that housing projects more than double the density of formal housing within their footprints and improve access to basic services like piped water.  While housing projects eradicate preexisting informal housing, they also crowd-in enough backyard houses to keep the total density of informal housing unchanged.  Our estimates show that for neighboring areas between 0 and 500 meters from project boundaries, informal housing density declines and formal housing prices drop with the strongest reductions concentrated in relatively higher income neighborhoods.

In order to identify these effects, we leverage three comparisons:  First, we compare constructed projects versus planned but unconstructed projects to control for how governments strategically locate projects on undeveloped land with preexisting slums.  Second, we compare projects before versus after scheduled construction to control for how neighborhoods with constructed projects often have more preexisting housing than neighborhoods with unconstructed projects.  Third, we compare areas nearby versus far from a project footprint within the same neighborhood to control for housing market trends specific to each neighborhood.  Our main estimates combine these three comparisons into a triple-differences estimator, which extends standard difference-in-differences approaches by allowing for the endogenous placement of projects within neighborhoods.\footnote{See \cite{rossi2010housing,hornbeck2017creative}, and \cite{diamond2016wants} for difference-in-differences estimators of place-based policies.}  

To assess welfare impacts, we build an equilibrium model of housing markets that maps housing density effects into household preferences for living within and nearby housing projects.  In the model, developers choose to build houses on land plots when the value to households from renting and enjoying local amenities exceeds the construction costs.  Housing projects may affect both local construction costs as well as the quality of local amenities.  By mapping the number of houses to welfare, this approach may have useful applications in developing country settings because price data are often scarce while housing quantity measures are increasingly available through remote sensing.\footnote{ \cite{marxthere} use satellite images to measure density and improvements in the quality of roofs in a Kenyan slum.  \cite{Brueckner2018backyarding} use the same satellite data as this paper to study backyard houses in South Africa. \cite{donaldson2016view} review several research projects using building-level remote sensing data to map urban growth especially in developing countries. }  

Structural estimates suggest that housing projects are likely to reduce aggregate welfare.  By subsidizing home construction, projects generate welfare gains for formal housing markets within their footprints; however, these gains are overwhelmed by the costs of project implementation as well as negative spillover effects on nearby formal and informal housing markets.  In total, simulation exercises suggest large net welfare losses on the order of 6.6 million USD per project, which is economically large given implementation costs of 3.2 million USD per project.\footnote{Implementation costs are drawn from the National Treasury's Annual Budget Reports.}  

% Since this framework assumes that land owners are able to capture all rental surplus, the distributional consequences of these policies depend on which households are also land owners.  Without data on ownership over time especially for informal housing, we instead explore distributional consequences by examining effects separately by neighborhood income quartile.

We proceed by first providing background on public housing and the South African housing program in Section~\ref{section:background}.  In Section~\ref{section:theory}, we build an equilibrium model of housing markets.  Section~\ref{section:data} describes the data used to measure outcomes and details our approach to identifying housing projects. Motivated with descriptive evidence in section~\ref{section:descriptives}, Section~\ref{section:methodology} lays out the estimation strategy and identifying assumptions. Section~\ref{section:results} presents our main results, and  Section~\ref{section:discussion} concludes.






\section{Public Housing Projects}\label{section:background}


European cities began investing in social housing programs in the early 20th century, and national governments in the West continued to grow these investments in the post-WWII era. After the wave of de-colonization in the 1950s, many developing nations also began public investments in housing, which were progressively phased out in order to secure international financing for national debt crises in the 1970s and 1980s. Beginning in the 1990s large middle-income countries took on subsidized housing programs that focused on channeling public funds to private developers to build full top-structure dwellings. Chile, South Africa, and Brazil are examples of this more recent approach.


\subsection{Public Housing in South Africa}


The housing projects studied in this paper were implemented as part of a large national housing scheme enacted in 1994. Though periodically revised and renamed,\footnote{Public housing in South Africa has been delivered under the {\it Reconstruction and Development Program} (RDP) starting in 1994 and subsequently by its successor, {\it Breaking New Grounds}, as of 2004.} the program has consistently sought to redress the economic and geographic legacy of apartheid by providing formal housing to low-income households.

This program allocates yearly funds to local housing authorities to construct and allocate 40m$^2$, single-story, two-room houses on individual plots.\footnote{Local housing authorities include provincial housing departments and municipal housing departments for urban areas like Johannesburg \citep{dhsreports}.}  Local authorities identify many large parcels of land that are able to each accommodate several hundred houses.  To meet budgetary targets, authorities often identify inexpensive land located on the urban periphery \citep{beninterview,dhsreports}.  Since project construction requires passing an environmental impact assessment, receiving zoning approval from local municipalities, and providing infrastructure access, authorities implement the most feasible subset of candidate projects each year.\footnote{Existing policy research characterizes South African housing as an opaque, top-down system where government authorities locate and allocate houses with minimal participation from local communities \citep{seriq}.  Tissington [2012] documents how local community calls for housing improvements in Guateng were left unanswered for over a decade by local authorities.  \cite{seriq} report how the Gauteng government refused to provide information about plans for housing subsidies and allocation to the Soweto Form, a local community based organization (p. 67).}  In many cases, authorities combine housing projects with slum eradication goals by replacing preexisting informal settlements with new housing projects (\cite{hofmeyr2008risk}).  Housing authorities subcontract with local housing developers for housing construction.  According to government figures, upwards of 3 million housing units have been delivered nationally between 1994 and 2015.


Eligible households are required to sign up for an official waiting list maintained by the National Department of Housing.\footnote{According to the General Household Surveys, 2009 to 2013, the share of households reporting at least one member on the waiting list has remained stable at over 13\% from 2009 to 2013.}  Eligibility requires South African citizenship, no previous property ownership, being married or having financial dependents, and having a monthly household income below R3,500 \citep{seriq}.  Each project house is assigned to a beneficiary in a first-come, first-served basis according to the the be beneficiary's place in the waiting list for the province or municipality. When projects replace existing informal settlements, previous inhabitants have priority for receiving project houses.  Beneficiaries are expected to pay a small one-time payment in order to receive title for their houses.  Guidelines also prevent beneficiaries from reselling their houses within their first 7 years of ownership.   %\footnote{The Gauteng Province has implemented their own waiting list since 2008 in order to exert greater control over the allocation process.}

In practice, these guidelines are loosely followed.  Recent reports point to cases of corruption in the allocation of houses \citep{seriq}.\footnote{Research suggests that beneficiaries are often selected over the course of project construction and sometimes even after construction has finished \citep{seriq}.}  Also, only 82\% of project houses are reported as being still occupied by their original beneficiaries within five years of construction.\footnote{This figure is calculated from the General Household Surveys from 2009 to 2013. Anecdotal evidence suggests that project managers are aware of active secondary markets but have difficulty policing these transactions \citep{resale}.} 


% \subsubsection{Backyard Shacks}

% By design, subsidized housing in South Africa offers recipients [[[[ generous amounts of yard space ]]]], often diverted to alternative land uses. The construction of informal backyard shacks is a common occurrence within project boundaries. Recipients typically enter agreements with tenants (at times relatives) to lease the shacks for cash or in-kind payments. According to the 2011 census, backyard tenants represent 7.5\% of South African households.\footnote{This figure jumps to 12.5\% for the province of Gauteng, where our study is conducted.} Though the structures are not as durable as their government-provisioned counterparts, living conditions are typically superior to conventional informal settlements. Tenants gain indirect access to their landlord's services such as water taps, electricity connections, and toilets, and benefit from reduced eviction threats and greater personal safety \citep{beall2003social}. \cite{Brueckner2018backyarding} note that {\it backyarding} is suggestive of inefficiencies in the program delivery, and allows households to correct potential misallocations of resources. Importantly for our analysis, backyard shacks reveal that more households may benefit from subsidized housing than the listed number of direct recipients. According to the General Household Surveys (2009-2013), more than 33\% of government-provisioned homes have backyard shacks within two years of the delivery date. 


% \subsection{Estimating Housing Demand}


% The triple-difference approach also provides a useful framework for estimating residential housing demand given by equation (\ref{eq:housingdemand}).  Our empirical setting allows us to identify the causal effect of housing projects on local amenities net of unobserved housing costs.  Variation in housing costs also identify the marginal utility of income, which helps translate amenity effects of housing projects into monetary welfare estimates.




\section{Data}\label{section:data}

% Our analysis focuses on the South African province of Gauteng, both the smallest geographically and most populated province in the country. Gauteng's boundaries roughly correspond to the greater metropolitan areas of Johannesburg and Pretoria. 

Understanding the local development impacts of public housing requires (1) a precise measure of the location, timing, and size of housing projects, and (2) outcomes measured at high spatial resolutions.

We locate projects using a map of housing projects obtained from the Gauteng City Regional Observatory, a research unit composed of the Gauteng Provincial Government and two Johanesburg universities.\footnote{\href{url}{www.gcro.ac.za/}}  The map describes \input{figures/total_gcro}housing projects as of 2008, including notes on their completion status.  We classify \input{figures/total_con}projects with descriptions including ``current,'' ``under implementation,'' or ``complete'' as constructed projects.  We then classify \input{figures/total_uncon}projects with descriptions including ``proposed,'' ``under planning,'' ``future,'' ``investigating,'' and ``uncertain'' as planned but unconstructed projects.  The remaining \input{figures/total_other}projects either do not include descriptions or their descriptions are difficult to classify as either constructed or unconstructed.  Appendix Table~\ref{table:projectdescriptions} includes tabulations of the full list of descriptions.  

%Unclassified projects are more likely to be located in the northern region of the Gauteng province according to the map in Figure~\ref{figure:map}, which suggests that housing authorities in northern areas like Pretoria area may have followed different record keeping practices compared to those in the Johannesburg metro area.  
% \input{figures/informal_other}of the unclassified projects are described as ``informal,'' which may correspond to government efforts to identify informal settlements rather than.

% Additional information for some projects allows us to examine the impacts of different types of housing projects.  We identify \input{figures/total_insitu}in-situ upgrading projects as those with descriptions containing the phrase ``Essential Services,'' which are linked to an aggressive demolition and rebuilding campaign launched by the Gauteng Province between 2000 and 2008 (\cite{hofmeyr2008risk}).  Likewise, we identify \input{figures/total_greenfield}greenfield projects as those with descriptions containing the phrase ``Mixed Housing Developments,'' which were designed to modernize greenfield projects by combining project houses with investments in local services (\cite{greenfield}).

For constructed projects, we assign a completion date to each project according to the date when recipients received deeds to their project houses.  To recover this date, we overlay project locations onto deeds data from the South African National Deeds Office.  The deeds cover the universe of housing transactions from 2001 to 2011 in {\it affordable areas}, which are defined as census enumeration areas with 2010 mean house prices below R500,000.\footnote{These data were provided by the Affordable Land and Housing Data Centre, which tracks affordable housing markets.} Deeds include price, GPS location, plot size, buyer name, and seller name.  Although the data do not identify whether deeds belong to housing projects, we are able to infer project status according to whether the seller name includes a government or municipality when first transacted.  This project definition also excludes deeds flagged as large buildings used for commercial purposes (less than 2\% of transactions) as well as purchase prices more than R50,000 above the yearly nominal subsidy values (less than 4\% of remaining transactions), resulting in a sample of over 48,000 deeds.  Appendix Figure \ref{figure:transactionhist} plots the histogram of sale prices according to this project definition, finding substantial bunching around subsidy values for project deeds and a smooth distribution of prices for non-project deeds.  We assign a completion date according to the modal year and month for deeds within each project.  Within projects, most government-sponsored properties are transacted in the same month.\footnote{Appendix \ref{appendix:histfreq} plots the distribution of subsidized and non-subsidized transactions around the modal transaction month.} 

For planned but unconstructed projects, we approximate expected completion dates by matching project names to National Treasury budget reports, which list expected project completion dates.  We digitized data for \input{figures/unique_budget_report_names}projects from budget reports spanning 2004 to 2009, which detail the name, start date, expected completion date, and cost of each housing project.  We then use a string-matching algorithm to link project names from the budget reports to the administrative maps.  Out of the 642 total project names from the administrative map, we are able to match 322 projects, including 126 constructed projects and 73 planned but unconstructed projects.  We provide further details about the digitization and string-matching algorithm in Appendix~\ref{appendix:stringmatch}.  Because of the low rate of matches, we use expected completion dates only for a subsection of the empirical analysis that focuses on estimating the immediate price impacts of housing projects.  The majority of the analysis compares outcomes in 2001 and 2011 for constructed and unconstructed projects under the assumption that these projects either were constructed or would have been constructed between 2001 and 2011.

%%% MORE DISCUSSION OF THIS LIMITATION?


\begin{figure}[t!]
\centering
\caption{Housing Project Map}\label{figure:map}
% \tcbox[colback=white,boxrule=.35mm,boxsep=0mm]{\includegraphics[scale=.098,trim={.9cm .4cm .9cm .4cm}]{figures/explanmap.jpg}}
% \tcbox[colback=white,boxrule=.35mm,boxsep=0mm]{\includegraphics[scale=.6,trim={.9cm .4cm .9cm .4cm}]{figures/newprojectmap.pdf}}
\tcbox[colback=white,boxrule=.35mm,boxsep=0mm]{\includegraphics[scale=.6,trim={.9cm .4cm .9cm .4cm}]{figures/projmap_1.png}}
\end{figure}

Figure \ref{figure:map} maps the sample of constructed and unconstructed projects as polygons within the Gauteng province. Importantly, Figure \ref{figure:map} also shows that the affordable areas -- the coverage area for our deeds data -- contain nearly every project boundary. While constructed and unconstructed projects are often adjacent to each other, possibly indicating cases where authorities were unable to complete different phases of planned projects, there are also many examples of isolated projects of both types.  Projects are generally located at relatively great distances from central business districts (CBDs), suggesting that vacant or inexpensive land plots are targeted by housing authorities.  Despite their distance from the CBDs, housing projects are often next to arterial highways, potentially easing commuting costs for recipients.

% We note that our approach is not without limitations, and may introduce measurement error insofar as we are misattributing deeds to housing projects (false-positives), or assuming a project is unconstructed when it was actually constructed (false-negatives).  

% To provide some validation for our classification, we tabulate in Table~\ref{table:projectdescriptions} project descriptions from the 2008 administrative policy maps according to whether projects are classified as constructed or unconstructed by 2011.  As of 2008, we find that constructed projects are more likely to be classified as ``completed" or ``under implementation", while unconstructed projects are more likely to fall into ``proposed'' or ``planning'' categories.  Among constructed projects, we find 5 ``proposed'' and 8 ``planning'' indicators, which could imply either (1) these projects are false-positives or (2) while planned at some point prior to 2008, these projects were eventually completed by 2011.\footnote{We are unable to assess the frequency at which these descriptions are updated in the data.}  We also identify a single ``complete'' project as unconstructed, likely because its houses do not appear in our deeds records.  Figure \ref{fig:forchange} in section \ref{section:descriptives} further validates our sample, showing how formal housing increases disproportionately in projects classified as constructed. 




% \subsection{Nearby housing transactions}


According to the 1997 Housing Act, the South African Government defines adequate ``housing development'' according to two criteria: 

First, housing development includes ``permanent residential structures with secure tenure, ensuring internal and external privacy and providing adequate protection against the elements'' (\cite{housingact}).  To measure the number and quality of housing structures, we analyze hand-coded building data from 2001 and 2012 derived from high-resolution aerial and satellite imagery. We obtain these data from GeoTerraImage (Pty) ltd., a local remote-sensing specialist.\footnote{\href{http://www.geoterraimage.com/}{\tt http://www.geoterraimage.com/}} The data differentiate structures across 30 categories, including formal and informal residential dwellings. Informal housing structures are easily identified from their temporary nature, often made of materials such as recycled wood and corrugated metal. In contrast, formal housing structures are permanent, generally made out of brick, and may have a pitched or a flat roof with tiles, zinc panels, or other materials. The data encode backyard shacks as informal structures, but distinguishes between backyard and other types of informal buildings.  As a validation exercise, we find high correlations ($\geq$0.85) between formal and informal structure counts between this data and census data from 2001 and 2011.  To measure building density, we transform this data into 25$\times$25m grid cell aggregates, creating five measures of housing density: (1) total residential structures split between (2) formal residential structures and (3) informal residential structures, which can be further decomposed into (4) backyard informal and (5) non-backyard informal structures.  We exclude grid cells where development is infeasible because these cells intersect with rivers, lakes, recreational locations (tennis courts, pools, basketball courts, etc.), and mining excavation areas (10\% of total grid cells).  
% In Figure \ref{fig:bblumaps}, we provide an example of the raw data and a depiction of our griding procedure, using the 2012 data wave.

Second, housing development includes ``potable water, adequate sanitary facilities and domestic energy supply'' (\cite{housingact}).  We measure impacts on dwelling and household characteristics with the full 1996, 2001, and 2011 Censuses of Population and Housing. We analyze average outcomes at the census block level, the smallest available census geography.  The province of Gauteng is divided between approximately 17,000 blocks in 1996, 11,000 blocks in 2001, and 17,000 blocks in 2011, which are not constant over time periods.  On average, each block contains 170 households. 

Finally, to examine housing price spillovers nearby projects, we include properties that are located outside of the project areas and are not sold by government housing agencies or large developers identified as sellers with more than 30 transactions.  Excluding these sellers limits the external validity of our results only to small developers and individual homeowners.  We focus on properties located within 1.5 kilometers of constructed and unconstructed housing projects, forming a sample of over 67,000 transactions.  We exclude the top 1\% of prices as well as prices below 2,500 Rand, which are likely to be composed of mismeasured prices or titles exchanged between family members. 


% Though we observe responses from every surveyed household in both census waves, the data does not allow for linking households across time periods. 

% We analyze household-level responses describing the quality of their living quarters. 
% Our outcomes are mainly binary indicators and pertain to the household's access to services (flush toilets, water tap, electricity access), housing durability, and tenure arrangements. 
% We identify households 

% \subsection{Building Based Land Use}
% \label{section:data:bblu}

% To measure housing growth, we analyze hand-coded building data derived from high-resolution aerial and satellite imagery. We obtain these data from GeoTerraImage (Pty) ltd., a local remote-sensing specialist.\footnote{\href{http://www.geoterraimage.com/}{\tt http://www.geoterraimage.com/}} The data differentiate structures across 30 categories, including formal and informal residential dwellings. Informal housing structures are easily identified from their temporary nature, often made of materials such as recycled wood and corrugated metal. In contrast, formal housing structures are permanent, generally made out of brick, and may have a pitched or a flat roof with tiles, zinc panels, or other materials. Importantly for our analysis, the data encodes backyard shacks as informal structures, but distinguishes between backyard and other types of informal buildings. We track changes in residential development by using two available survey waves in Gauteng: 2001 and 2012. As a validation exercise, we compute aggregated building counts at the census block level, and check the resulting figures against the number of households reporting to live in formal/informal housing in the census. The two data sources paint a consistent picture of housing in Gauteng, with high correlations ($\geq$ 0.85) between formal and informal building quantities in both available comparison years.\footnote{We correlate the 2001 and 2012 building surveys with the 2001 and 2011 censuses, respectively.}  To measure building density, we transform this data into 25$\times$25m grid cell aggregates, creating five measures of housing density: (1) total residential structures split between (2) formal residential structures and (3) informal residential structures, which can be further decomposed into (4) backyard informal and (5) non-backyard informal structures.  We exclude grid cells where development is infeasible because these cells intersect with rivers, lakes, recreational locations (tennis courts, pools, basketball courts, etc.), and mining excavation areas (10\% of total grid cells).  In Figure \ref{fig:bblumaps}, we provide an example of the raw data and a depiction of our griding procedure, using the 2012 data wave.
% These grid cells will be the main units of observations for our housing density regressions, described in section \ref{section:bbluestimates}. 







\section{Descriptive Statistics}\label{section:descriptives}
% As mentioned in section \ref{section:data}, 
% Validate measures :
% \begin{itemize}
% 	\item delivered houses are way higher in constructed, but there's a little room for slippage
% \end{itemize}
% Balance/identification discussion : 
% \begin{itemize}
% 	\item everything else is really balanced, which is good for identification
% \end{itemize}

% Spatial targeting

% Unconstructed and constructed Differences

% Which types of neighborhoods receive unconstructed and constructed projects and where are projects located within neighborhoods


% Note! :

% \begin{itemize}
% \item first, hh 2001 subplaces do not intersect perfectly with project area, so average incomes include project areas in the pre-period, which actually might be fine
% \item second, quartiles defined for prices may be different than quartiles defined for 
% \item it is possible to do the nearby analysis conditioning on nearby incomes... maybe its fine as is....
% \end{itemize}

We provide descriptive evidence to validate our measures of constructed and unconstructed projects.  We then examine differences between neighborhoods with constructed projects and neighborhoods with unconstructed projects.  Finally, we examine where projects are located within neighborhoods.  
% Finally, we document how project areas and nearby areas evolve differentially over time.  

Table~\ref{table:projectdescriptives} compares average attributes for constructed and unconstructed projects.  The first row counts the number of project houses recorded in the deeds data within constructed and unconstructed projects, providing an independent measure of which projects were constructed.  Projects categorized as constructed receive a large influx of 374 deeds project houses between 2001 and 2011, indicating that many of these projects were successfully completed in this interval.  By contrast, projects categorized as unconstructed receive just 11 deeds project houses on average, which suggests that completed projects are unlikely to be misclassified as unconstructed projects.   

Housing prices within 1 km of projects are lower than the average price of 252,000 Rand for areas over 1 km from projects, indicating that projects are located in neighborhoods with less expensive land.  Using census data, Appendix Table \ref{table:projectdescriptivescensus} finds that before project construction, preexisting houses in project footprints are smaller and have worse access to services compared to other houses.  

With average land areas exceeding one $\text{km}^{2}$, housing projects represent a significant change in local neighborhoods.  Size, timing, location, and nearby house prices are broadly similar between unconstructed and constructed projects.  

% All other attributes of housing 
%  the location, size, and surrounding housing stock of the \input{figures/total_con_uncon}constructed and unconstructed projects.  shows that constructed projects deliver an average of 374 houses as measured by the deeds data.  By contrast, projects flagged as unconstructed only produce 11 houses on average, suggesting that 
% validated also by the descriptive changes in housing projects... 
% Constructed projects are also substantially larger in area than unconstructed projects. these discrepancies may be due to many unconstructed projects representing smaller planned extensions to previously implemented projects. 
% It may also reflect the fact that larger land plots are first targeted by housing authorities to maximize delivery. 
% Though unconstructed projects are located in slightly more remote locations, both types of projects impose long commutes on residents, as measured by the average distance to central business districts. 
% These distances are consistent with housing authorities targeting inexpensive, vacant land for these projects. Finally, prices for non-subsidized housing in the vicinity of project boundaries are slightly lower for unconstructed projects, perhaps driven in part by their more distant locations.
% Table~\ref{table:projectdescriptives} further divides projects into city and suburb according to whether their centroids are above or below median distance from a CBD respectively.  City projects are smaller, but receive more houses than suburb projects.  We also find higher housing prices in formal markets surrounding project areas consistent with these areas providing better access to employment opportunities.  Similar patterns emerge between constructed and unconstructed projects when we disaggregate by distance to CBD.

\vspace{0mm}
\begin{table}[h!]
\centering
\caption{Housing Project Areas Description}\label{table:projectdescriptives}
\vspace{0mm}
\begin{tabular}{l*{1}{cc}}
\toprule
  &Constructed & Unconstructed \\
\midrule
\input{figures/descriptives_tablet_4}
\bottomrule
%\multicolumn{3}{l}{\scriptsize Const. refers to constructed projects and unconst. refers to unconstructed projects.}\\[-.5em]
%\multicolumn{3}{l}{\scriptsize $^*$Calculated from {\it expected} completion dates using Gauteng National Treasury budget reports.}\\[-.5em]
\multicolumn{3}{l}{\scriptsize $^\dagger$ The USD averaged around 7.70 Rands during the 2001-2011 period.}\\[-.5em]
\multicolumn{3}{l}{\scriptsize $^\ddagger$Measured as the average minimum distance with respect to Johannesburg and Pretoria CBDs. } \\[-.5em]
\end{tabular}
\end{table} 


% Next, we turn to household census data to assess how both types of projects differ in terms of dwelling characteristics prior to project construction. 
% \footnote{Our census geography selection method is depicted in more detail in appendix \ref{appendix:bufferdesign}.} 
% To further assess where projects are located, Appendix Table~\ref{table:projectdescriptivescensus} uses pooled 1996 and 2001 census data to examine preexisting housing quality in project footprints before construction.  Since census blocks are often larger than housing projects, Table~\ref{table:projectdescriptivescensus} considers census blocks as pertaining to a housing project when over 50\% of the land area of the block overlaps with a project footprint.  Table~\ref{table:projectdescriptivescensus} compares means for household indicators aggregated at the block level based on whether the census boundaries overlap with constructed (first column) or planned but unconstructed projects (second column).  As a reference, the third column provides averages for all census blocks in the Gauteng province.

 % Comparing preexisting houses in constructed and unconstructed projects, we do not observe systematic differences in housing attributes.  

% While constructed project footprints are more likely to have flush toilets, electricity, and large household sizes, households in unconstructed project footprints report having better access to formal houses and piped water in their homes.  With a small number of blocks, average characteristics are not statistically different between constructed and unconstructed project footprints except for the formal housing measure.\footnote{Statistical significance is calculated at 5\% confidence level weighted by land area.}


\begin{figure*}[h!]
        \centering
        \caption[ Pre-Period Housing Densities in Constructed and Unconstructed Projects]
        {\small Pre-Period Housing Densities in Constructed and Unconstructed Projects} 
        %\vspace{2mm}
        \begin{subfigure}[b]{0.495\textwidth}
            \centering
            \includegraphics[width=\textwidth,trim={0.3cm .3cm 0.1cm 0cm}, clip=true]{figures/bblu_for_pre_means_4_spk.pdf}
            \caption[Network2]%
            {{\small Formal density}}    
            \label{fig:prefor_raw}
        \end{subfigure}
        \hfill
        \begin{subfigure}[b]{0.495\textwidth}  
            \centering 
            \includegraphics[width=\textwidth,trim={0.3cm .3cm 0.1cm 0cm}, clip=true]{figures/bblu_inf_pre_means_4_spk.pdf}
            \caption[]%
            {{\small Informal density}}    
            \label{fig:preinf_raw}
        \end{subfigure}
        % \begin{subfigure}[b]{0.495\textwidth}
        %     \centering
        %     \includegraphics[width=\textwidth,trim={0.3cm .3cm 0.1cm 0cm}, clip=true]{figures/bblu_for_fe_pre_means_4_spk.pdf}
        %     \caption[Network2]%
        %     {{\small Formal density within neighborhood}}    
        %     \label{fig:prefor_fe}
        % \end{subfigure}
        % \hfill
        % \begin{subfigure}[b]{0.495\textwidth}  
        %     \centering 
        %     \includegraphics[width=\textwidth,trim={0.3cm .3cm 0.1cm 0cm}, clip=true]{figures/bblu_inf_fe_pre_means_4_spk.pdf}
        %     \caption[]%
        %     {{\small Informal density within neighborhood}}    
        %     \label{fig:preinf_fe}
        % \end{subfigure}
        \label{fig:rawbblumeans_het}
        %\vspace{-6mm}
   {\scriptsize Negative distances indicate areas within project boundaries while positive distances measure areas away increasingly outside of project boundaries.} % Within neighborhood densities are calculated by subtracting mean densities  \\[-.5em] at the 2001 census subplace level from each 25$\times$25m grid cell.
    \end{figure*} 

% Using the building-based land-use measures described in section \ref{section:data:bblu}, 
% we then examine housing densities across constructed and unconstructed project areas.  
% To inspect how densities change with proximity to housing projects,
% Probably worth commenting on this gap in the pre-period inside the boundaries.

The building data provide spatially precise measures of preexisting development in areas prior to project construction.  We calculate euclidean distances from the centroid of 25$\times$25m grid-cells to the nearest project boundary, assigning negative distances to grid-cells inside project footprints.  We then compute the average density at 25m intervals, reported in houses per square kilometer.  Greater negative distances exclude smaller projects in computing average densities, which may account for some of the variation in building density within projects, particularly for informal housing.  Appendix~\ref{appendix:projectcounts} illustrates this compositional change in more detail.  

Figures \ref{fig:prefor_raw} and \ref{fig:preinf_raw} respectively plot average preexisting densities of formal and informal houses in 2001 (before project construction).  We find low densities of formal housing and very high densities of informal housing within both unconstructed and constructed project footprints (at negative distances).  Crossing just outside of project footprints (to positive distances), formal housing densities quickly increase while informal housing densities sharply jump downwards.  These trends are consistent with housing projects being precisely targeted within poorer neighborhoods with few existing formal dwellings.  Formal and informal housing densities gradually decay moving further from project footprints.  On average, constructed projects are located in neighborhoods with greater housing densities than unconstructed projects although housing densities following similar trends with respect to distance from project boundaries.  Informal densities within project footprints are significantly higher for constructed projects compared to unconstructed projects, which is consistent with housing authorities prioritizing project completion in neighborhoods with large slums (\cite{hofmeyr2008risk}).

% Given that housing projects appear to be located in inexpensive neighborhoods with high preexisting densities of informal housing, we next examine whether housing projects are further targeted to particular locations within neighborhoods.  Figures \ref{fig:prefor_fe} and \ref{fig:preinf_fe} are calculated by first subtracting the average housing density in each neighborhood from the density in each grid cell, then calculating averages over distances to project footprints.  Neighborhoods are defined according to 1,001 census 2001 subplaces, which identify suburbs, wards, villages, or informal settlements (\cite{censusmeta}).  Figures \ref{fig:prefor_fe} and \ref{fig:preinf_fe} can be interpreted as the difference in housing density from the neighborhood average associated with each distance from a project boundary.  

% Accounting for neighborhood differences removes much of the variation in preexisting housing densities across distances to housing projects, especially outside of project footprints.  Yet, low levels of formal housing and high levels of informal housing persist just within project footprints, consistent with housing authorities targeting projects toward inexpensive, poorer plots of land even within neighborhoods.  Similar patterns within neighborhoods for constructed and unconstructed areas suggest that both project types are located using similar criteria.  Accounting for neighborhood densities collapses average differences in densities between constructed and unconstructed projects although constructed projects have higher building densities within project footprints.  

% Appendix Table~\ref{fig:rawbblumeans_het} graphs pre-period density of formal and informal housing separately for projects in city centers and projects in suburbs.  Unconstructed project areas near city centers have slightly higher densities of informal housing and lower densities of formal housing.  In suburbs, the opposite pattern holds with constructed project areas having somewhat higher densities of formal housing and lower densities of informal housing.  Outside of project boundaries, constructed and unconstructed projects have similar informal and formal housing levels in both city and suburb areas.



\section{Empirical Methodology}\label{section:methodology}


% \begin{figure*}[t!]
%         \centering
%         \caption[ Example Housing Project]
%         {\small Example Housing Project } 
%         \vspace{2mm}
% % \includegraphics[width=\textwidth,trim={0cm 0cm 0cm 0cm}]{figures/newbblumap1.png}
% \begin{tikz}
% \includegraphics[width=.95\textwidth,trim={0cm 0cm 0cm 0cm}]{figures/casestudy6_medium.png}
% \end{tikz}
%         \label{fig:bblumaps}
%         \small
% \end{figure*}

% % % south west

\tikzstyle{mybox} = [draw=white, fill=white, thin,
    rectangle, rounded corners, inner sep=1pt, inner ysep=1pt]

\begin{figure}
\caption{Example Housing project}\label{fig:bblumaps}
\centering
\begin{tikzpicture}[      
        every node/.style={anchor=south west,inner sep=0pt},
        x=1cm, y=1cm,
      ]   
     \node (fig1) at (0,0)
       {\includegraphics[width=1\textwidth,height=1\textheight,keepaspectratio]{figures/casestudy6_medium.png}};

\node [mybox] (box) at (3.5,8.5) {%
    \begin{pbox}{5cm}
       { \scriptsize $\textsc{Const}$ }
    \end{pbox}};
\node [mybox] (box) at (5,7) {%
    \begin{pbox}{5cm}
       { \scriptsize $\textsc{Spill}\times\textsc{Const}$ }
    \end{pbox}};
\node [mybox] (box) at (5.9,5.5) {%
    \begin{pbox}{1cm}
       { \scriptsize $\textsc{Proj}\times\textsc{Const}$ }
    \end{pbox}};

\node [mybox] (box) at (8.5,7.5) {%
    \begin{pbox}{5cm}
       { \scriptsize $\textsc{Spill}$ }
    \end{pbox}};
\node [mybox] (box) at (8.1,6.3) {%
    \begin{pbox}{1cm}
       { \scriptsize $\textsc{Proj}$ }
    \end{pbox}};


% \node[align=center] at (2.8,7.6)  { \text{\footnotesize  $\overline{\eta}^{1}_{1,L} $}};

\end{tikzpicture}
\end{figure}



To estimate the local impacts of housing projects, we implement a difference-in-differences-in-differences (or triple-differences) strategy comparing changes in outcomes nearby projects to areas further away from projects across constructed project areas and planned but unconstructed project areas.  


We propose combining near and far comparisons with constructed and unconstructed comparisons in the following triple-differences specification:
\begin{align}\label{eq:main}
\begin{split}
\quad y_{ipnt} \, =& \,   \textsc{\small Proj}_{ip} \,\, \Big( \alpha_1 \, \textsc{\small Post}_{t}\times\textsc{\small Const}_{p} \, + \, \alpha_2 \, \textsc{\small Post}_{t} \, + \, \alpha_3 \, \textsc{\small Const}_{p}\, +\, \alpha_4 \Big) \, + \\[.2em]
& \, \textsc{\small Spill}_{ip} \, \Big( \beta_1 \, \textsc{\small Post}_{t}\times\textsc{\small Const}_{p} \, + \, \beta_2 \, \textsc{\small Post}_{t} \, + \, \beta_3 \, \textsc{\small Const}_{p} \, +\, \beta_4 \Big) \, + \\[.2em]
& \, \gamma_1 \,  \textsc{\small Post}_{t}\times\textsc{\small Const}_{p} \, + \, \gamma_2 \,\textsc{\small Post}_{t} \, +  \, \theta \, X_{ipnt} \, + \, \lambda_n \, + \, \varepsilon_{ipnt} \quad 
\end{split}
\end{align}  % \footnote{ DO THE ROBUSTNESS EXCLUDING THESE AREAS!!!!!!! }
\noindent where $y_{ipnt}$ is the outcome for unit $i$ in vicinity of project $p$ in neighborhood $n$ observed at time $t$ with idiosyncratic error $\varepsilon_{ipnt}$.  We consider three units of observation: a 25$\times$25m grid-cell, a census block, and a formal housing property.  Units are weighted according to their spatial area to ensure that project effects are representative across space.  Each unit is assigned to its nearest project according to the euclidean distances to project boundaries.  $\textsc{\small Post}_{t}$ equals one in the period after construction or expected construction and zero otherwise.  $\textsc{\small Const}_{p}$ equals one if project $p$ is constructed and zero if project $p$ remains unconstructed.  $\lambda_{n}$ includes neighborhood fixed effects and $X_{ipnt}$ includes a vector of additional controls.  The terms $\textsc{\small Post}_{t}$, $\,\textsc{\small Const}_{p}$, and $\textsc{\small Post}_{t}\times\textsc{\small Const}_{p}$ represent a standard differences-in-differences framework, controlling for differential changes for constructed and unconstructed projects before and after construction.  

We augment this standard framework by also estimating differential changes nearby project footprints (0 to 500m) relative to further away from footprints (500m to 1,500m).  $\,\textsc{\small Proj}_{ip}$ measures the percentage of unit $i$'s area that overlaps with the footprint of project $p$.  When unit $i$ is measured in terms of GPS points such as the deeds data, $\,\textsc{\small Proj}_{ip}$ is either one (if unit $i$ is within footprint $p$) or zero (if unit $i$ is outside footprint $p$).  Other outcomes are measured at geographical areas such as census blocks, which are often larger than project footprints or only partially overlap with project footprints.  In these cases, $\,\textsc{\small Proj}_{ip}$ takes a value between zero and one depending on the percentage of unit $i$'s area that overlaps with the project footprint.  Likewise, $\,\textsc{\small Spill}_{ip}$ measures the percentage of unit $i$'s area that overlaps with a 0 to 500m buffer around the footprint of project $p$.  

While our choice of buffer area is arbitrary, we aim to select a buffer area that is sufficiently wide to capture any potential spillover effects of housing projects.  With average areas of 3 $\text{km}^{2}$, buffers from 0 to 500m are 2.5 times larger than average project footprints.  To the extent that spillover effects dissipate across space, these buffers are likely to include spillover effects.\footnote{As shown in Figures~\ref{fig:prefor_raw} and \ref{fig:preinf_raw}, pre-period differences in building density are uncorrelated with distance to project footprint at 500m and greater.  This finding suggests that any preexisting spillover effects from living near project areas disappear by 500m.}  Similarly, we limit the control group to areas between 500m to 1,500m under the assumption that spillover effects from housing projects have fully dissipated by 500m from project footprints.  This control group provides a useful way to control for any economic or housing market trends that may affect these neighborhoods.  In this framework, since each project includes two treatment groups (project and spillover) and one control group, we cluster all standard errors at the project by group level.

Interpreting coefficients on $\,\textsc{\small Proj}_{ip}$ and $\,\textsc{\small Spill}_{ip}$ terms as capturing the effect of moving from 0\% to 100\% spatial exposure requires two additional assumptions: (1) the spatial effects are proportional to spatial area, and (2) the distribution of project and spillover areas within outcome units is uncorrelated with the distribution of outcomes within these units. %\footnote{TEST THESE ASSUMPTIONS?! PROVIDE MORE EXPLANATION!?}

Our coefficients of interest, $\alpha_1$ and $\beta_1$, capture differential changes in outcomes for constructed projects relative to unconstructed projects in footprints and buffer areas ($<$500m) respectively relative to areas further away from footprints (500 to 1,500m).  A causal interpretation requires the assumption that absent the completion of a housing project, changes within and nearby constructed and unconstructed areas would have evolved similarly relative to areas far away from projects.  This triple-difference framework allows for constructed and unconstructed projects to experience different trends in economic development over time as long as these trends follow similar trajectories near and far from projects.  This framework also permits differential economic trends in areas near and far from projects given that these differential trends are parallel between constructed and unconstructed projects.  This framework does not allow for trends that are correlated with construction status, timing, and precise location.  For example, forward-looking households may anticipate project construction on particular plots of land and alter their housing investment decisions accordingly.  Qualitative evidence suggests little room for anticipation in this context due to substantial uncertainty in project location and timing as a result of difficulties coordinating stakeholders and sources of funding as well as a lack of transparency among housing authorities \citep{serihistory}.\footnote{\cite{diamond2016wants} also leverage uncertainty in project timing to study affordable housing in the US.} 



\section{Estimation Results}\label{section:results}

% To draw statistical inference on the patterns depicted in section \ref{section:descriptives}, we proceed to estimate variants of equation (\ref{eq:main}) for each outcome of interest. 

% d is 25 by 25, and t = 2001 and 2011


% Backyard housing is a common phenomenon in South Africa where households erect informal dwellings within the plots of formal dwellings \citep{Brueckner2018backyarding}.  Project houses may be well-suited for backyarding because each house receives an individual landplot that is often much larger than the house itself. put this up top!!  with a discussion of the maps!!

\subsection{Housing Density}\label{section:bbluestimates}

We first investigate how housing projects impact housing density within and around their footprints.  We estimate the reduced form equation (\ref{eq:main}) where the outcomes are building density measures for 25$\times$25m grid cells in 2001 and 2012 and $\textsc{\small Post}_{t}$ equals one for observations in 2012.  Table~\ref{table:bbluDDD} reports the triple-difference coefficients of interest for (1) within project footprints and (2) 0-500m outside of project footprints.\footnote{Appendix Table~\ref{table:bbluDDDfull} includes the full set of coefficients as well as additional outcomes.}  Results are reported in terms of houses/$\text{km}^{2}$.  

Column (1) of Table~\ref{table:bbluDDD} finds that total housing density within project footprints statistically significantly increases by 618 house per $\text{km}^{2}$, which is over twice the baseline average of 579 houses per $\text{km}^{2}$.  This finding suggests that government housing projects are able to substantially out-pace any private housing development in similar but unconstructed project footprints.  At the same time, total housing density 0-500m outside of projects decreases by around 217 houses per $\text{km}^{2}$ with statistical significance at the 10\% level.  Given an average project area of 1.2$\text{km}^{2}$ and an average buffer area of 3$\text{km}^{2}$, the magnitudes of these estimates suggest that each project generates around 742 new houses inside project footprints while crowding out around 651 houses in nearby areas.\footnote{742 new houses per footprint is much larger the 374 houses identified as project houses within footprints using the deeds transaction data in Table~\ref{table:projectdescriptives}.  This discrepancy is likely due to under-reporting of housing projects in deeds records \citep{seriq}.}  


To examine the composition of housing growth, Columns (2) and (3) disaggregate total housing into formal housing, informal non-backyard housing, and informal backyard housing.  Column (2) finds that the increase in total housing within projects is almost entirely driven by formal housing with a statistically significant, positive coefficient of 650 houses per $\text{km}^{2}$.  Meanwhile, total reductions in housing density 0-500m outside of project footprints are driven primarily by statistically significant decreases in informal housing.  These findings suggest that housing projects primarily crowd-out nearby informal housing supply with little impact on nearby formal housing supply.

% although these coefficients are statistically insignificantly different from zero. 

Appendix~\ref{table:bbluDDDfull} includes the full set of triple-difference coefficients as well as additional columns disaggregating informal housing into backyard housing and non-backyard housing.  Large reductions in informal non-backyard housing (Column 4) within projects are consistent with qualitative evidence that housing authorities cleared preexisting slums before constructing new projects \citep{hofmeyr2008risk}.  In areas 0-500m from project footprints (Column 5), declines in informal housing are almost evenly split between informal backyard and non-backyard housing.


% Column (4) documents a statistically significant decrease of 573 informal non-backyard houses/$\text{km}^{2}$ within projects, which suggests that these slum clearance efforts were particularly aggressive given low preexisting densities of around 184 houses/$\text{km}^{2}$.  Column (5) indicates that project areas also experience substantial growth in backyard informal housing on the order of 542 houses/$\text{km}^{2}$, which almost exactly offsets reductions in informal non-backyard houses.    
% This finding matches earlier descriptive evidence from Figure \ref{fig:rawbblumeanschange}.  

% Column (2) shows a statistically insignificant decrease in formal housing nearby housing project boundaries, which appears to contrast with descriptive evidence in Figure \ref{fig:rawbblumeanschange}.  This discrepancy is likely due to differences in weighting observations: while Figure \ref{fig:rawbblumeanschange} computes average changes in formal housing according to distance bins, Table~\ref{table:bbluDDD} reports differential changes that are spatially representative, which results in applying relatively greater weights to areas at further distances from project boundaries since further distances cover greater land areas.  

% On net, the quantity of informal housing within projects remains roughly unchanged.
% discuss appendix table, how the substitution is concentrated in lower income quartiles
% Meanwhile, backyard housing growth (Column (3)) replaces informal non-backyard housing (Column (4)) that is removed as part of well-documented slum clearance programs in many of these projects \citep{hofmeyr2008risk}.  

% Formal housing growth drives almost all of the increase in density within project footprints while informal housing generates most of the decline in density outside of project areas.  To the extent that formal housing has higher quality than informal housing, these results suggest that housing project generate an overall upgrade in local housing quality.  Within project areas, informal housing density remains nearly unchanged despite well-documented slum clearance programs in many of these projects \citep{hofmeyr2008risk}.\footnote{Cite APPENDIX WITH HETEROGENEITY OF RESULTS ACCORDING TO PROJECT TYPE< AND DESCRIBE PROJECT TYPE ANALYSIS!!!!}  

%Little change in total informal housing masks significant shifts in the type of informal housing within project footprints.  Our density measure differentiates informal housing between backyard and non-backyard housing.  Backyard housing is a common phenomenon in South Africa where households erect informal dwellings within the plots of formal dwellings \citep{Brueckner2018backyarding}.  Project houses are especially well-suited for backyarding because each house receives an individual landplot that is often much larger than the house itself.  Columns (4) and (5) include results for informal backyard and non-backyard housing respectively.  In project footprints, backyard housing almost completely replaces non-backyard informal housing as households erect new informal houses within the plots of project houses.  Both backyard and non-backyard housing decline 0-500m nearby projects although the coefficients are statistically insignificant.  These results suggest that bulldozing slums and replacing them with new housing projects does not change the resulting density of informal housing within project footprints.  However, these projects may have spillover effects on neighboring areas by crowding out growth of nearby informal housing.  

\begin{table}[hbt!]
\small
\centering
\caption{Housing Density Estimates}\label{table:bbluDDD}
\vspace{-2mm}
\begin{threeparttable}
\begin{tabular}{lCCC}
\toprule
& \small (1) & \small (2) & \small (3) \\
 & \small Total Housing & \small Formal Housing & \small Total Informal Housing  \\ \midrule 
\input{figures/b_3out_ksp_o0_d250_500_top}
\bottomrule
\end{tabular}
\begin{tablenotes}
\item \footnotesize Standard errors clustered at the project level in parenthesis.\,\, \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 
Outcomes are measure in terms of houses per $\text{km}^{2}$.
Estimates control for 2001 census sub-place fixed effects.
Coefficients are interactions with constructed, $\textsc{Const}_{p}$  and post, $\textsc{Post}_{t}$ indicators.
 Appendix Table~\ref{table:bbluDDDfull} includes all coefficients.
\end{tablenotes}
\end{threeparttable}
\end{table}



\subsection{Housing Quality}\label{section:resultscensus}

Given large shifts in quantities and types of housing within and around projects, we next use census data to understand whether housing projects also affect housing quality.  We follow the South African government's emphasis on infrastructure access as an important measure of housing quality (\citep{housingact}).  We reestimate equation (\ref{eq:main}) using census data from 1996, 2001, and 2011.  Outcomes include housing and demographic characteristics averaged across households in each census block and year.  $\textsc{\small Post}_{t}$ equals one for observations from the 2011 census.  $\textsc{\small Proj}_{i}$ and $\textsc{\small Spill}_{i}$ measure the fraction of spatial overlap of each census block with project areas and spillover areas (0-500m) respectively.\footnote{3,118 blocks partially overlap with project areas while 1,138 blocks fully overlap with project areas.  Likewise, 7,456 blocks partially overlap with spillover areas while 1,402 blocks fully overlap with spillover areas.}  Specifications control for the spatial area of census blocks up to a cubic term and interacted with year in order to account for the possibility that household sampling may vary according to census block size.  All estimates are weighted by the spatial area of census blocks so that the estimates are representative of the spatial impacts of the projects.  Weighting according to spatial areas further ensures that the census results are directly comparable to the building density results.  Table~\ref{table:censusestimates} reports the triple-difference coefficients of interest for (1) within project footprints and (2) 0-500m outside of project footprints.  Appendix Table \ref{table:censusestimatesfull} includes the full set of triple-difference coefficients.


\begin{table}
\small
\centering
\caption{Census Estimates}\label{table:censusestimates}
\vspace{-2mm}
\begin{threeparttable}
\begin{tabular}{lDDDD}
\toprule
 & \small (1) & \small (2)  & \small (3) & \small (4)   \\
 & \small Has Piped Water Indoors & \small Has a Flush Toilet &  \small Has Electricity & \small Total Rooms  \\ \midrule
\input{figures/ch1_ksp_o0_d250_500_bb1_top}\bottomrule
\end{tabular}
\begin{tablenotes}
\item Standard errors clustered at the project level in parenthesis.\textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01
Outcomes in Columns (1), (2), and (3) are indicator variables.
Specifications include census 2001 subplace fixed effects.
Results are weighted by unit area and control for up to a cubic in unit area by time. 
``HH'' stands for household and ``HoH'' stands for head of household.
\end{tablenotes}
\end{threeparttable}
\end{table}

% Inside projects, the share of households living in formal housing jumps by 61 percentage points consistent with the large growth in formal housing density documented in Table~\ref{table:bbluDDD}.  
Columns (1) to (4) of Table~\ref{table:censusestimates} capture changes in housing characteristics within and around housing project footprints.  The shares of households in project areas with flush toilets, piped water indoors, and/or electricity increase by economically meaningful magnitudes although only the coefficient for access to piped water indoors is statistically significant.  The average number of rooms per house increases by 1.9 likely because new project houses are often larger than preexisting informal houses.  Estimates for spillover areas are economically small and statistically insignificant across all measures. 

Appendix Table~\ref{table:censusestimatesfull2} provides estimates for demographic characteristics of households.  While household sizes experience statistically significant increases in project areas, no other coefficients are significant in either project or spillover areas.  Point estimates for population density (Column 2), employment (Column 3), and household income (Column 6) suggest that projects may crowd-in more households and higher income households in both project and spillover areas.




% Complementing changes in housing characteristics, Columns (7) to (12) of Table~\ref{table:censusestimatesfull2} estimate changes in demographics within and around project footprints.  Within projects, household (``HH'') sizes increase by 0.59 people on average given a baseline average of 3.25 people per household, which is consistent with recipients of project houses inviting additional family members to live in their new houses.  Population density increases by 1,610 people per $\text{km}^{2}$, which is statistically insignificant, but economically meaningful --- this effect almost doubles the baseline average population density of 1,793.  Coefficients for average age, race, and employment status of the head of households (``HoH'') as well as household log-income are economically small and statistically insignificant, suggesting little demographic change as a result of these housing projects.  The point estimate for household income (Column (12)) suggests a 12\% increase in average household incomes in project areas although this result is statistically insignificant.  Taken together, these results are consistent with housing authorities ensuring that preexisting slum residents are able to benefit from new project houses.  The results are less consistent with the hypothesis that political corruption steers project houses toward wealthier and more politically connected households \citep{seriq}.  %%% maybe reinterpret in light of the new model...


% Spillover areas report positive, statistically insignificant coefficients for both household size (Column (7)) and population growth (Column (8)) that are much smaller in magnitude and significance than corresponding estimates inside projects.  Spillover estimates for household demographics in Columns (8) to (11) parallel estimates within projects by having low statistical significance and small magnitudes.  Estimates predict a large, statistically insignificant increase of 21\% in average household income.



% The coefficient for the share of households in project areas that report owning their home is positive but statistically insignificant.

% In spillover areas (0-500m outside of projects), 

% the share of households that report living in formal houses (Column (1)) increases by a statistically insignificant 12 percentage points.  Any increase in the ratio of formal to informal housing nearby projects may reflect crowding-out of nearby informal housing as described by housing density estimates from Table~\ref{table:bbluDDD}.  Economically small and statistically insignificant coefficients for infrastructure access, number of rooms, and homeownership in spillover areas in Columns (2) to (5) suggest little scope for infrastructure and housing stock investments in project areas to spillover to surrounding neighborhoods.


% and \ref{table:censusestimatesfull2} include the full set of coefficients.}  






\subsection{Prices}\label{section:resultsprices}


We examine how housing projects may affect the prices of nearby formal housing using deeds data on housing transactions.  Because few private housing transactions occur within project footprints and because it is possible that project house allocations may be miscoded as private housing transactions, we restrict our analysis to properties located outside of project footprints.  We estimate the following modification of equation (\ref{eq:main}):
\begin{align}\label{eq:mainprice}
\begin{split}
\quad y_{ipnt} \, =&  \, \beta_1 \, \textsc{\small Spill}_{i}\times\textsc{\small Const}_{p} \, + \, \beta_2 \, \textsc{\small Spill}_{i} \, + \, \beta_3 \, \textsc{\small Const}_{p}\,+  \,  \\[.2em]
 &\sum_{l} \textsc{Post}^{l}_{t} \, \Big( \, \alpha_1^{l} \, \textsc{\small Spill}_{i}\times\textsc{\small Const}_{p} \, + \, \alpha_2^{l} \, \textsc{\small Spill}_{i} \, + \, \alpha_3^{l} \, \textsc{\small Const}_{p}\, +\, \alpha_4^{l} \Big) \, +  \,  \\
&\theta \, X_{ipnt} \, + \, \lambda_n \, + \, \varepsilon_{ipnt} \quad 
\end{split}
\end{align}
\noindent where the unit of analysis, $i$ is a property transaction, time, $t$ is monthly, and the outcome, $y_{ipnt}$ is the log-price of each property transaction.  To utilize monthly transaction data, we limit the sample to include constructed housing projects where the month of completion is available and unconstructed housing projects where we are able to project an expected month of construction.  We refer to the completion month for constructed projects and the expected completion month for unconstructed projects jointly as the scheduled construction month.  We consider two specifications to examine price effects over time:  in the first, we estimate the average effect on prices where $\textsc{Post}^{1}_{t}$ takes a value of one for transactions occurring after the scheduled construction month ($l=1$).  In the second, we separate the post effect into three groups ($l\in \{1,2,3\}$):  $\textsc{Post}^{1}_{t}$ equals one for transactions between 0 and 2 years after scheduled construction, $\textsc{Post}^{2}_{t}$ equals one for transactions between 2 and 4 years after scheduled construction, and $\textsc{Post}^{3}_{t}$ equals one for all transactions over 4 years after scheduled construction.  $\textsc{\small Spill}_{ip}$ takes a value of one for properties between 0 and 500 meters outside of their nearest project boundary.  Some specifications include additional controls, $X_{ipnt}$ for the calendar month of each transaction and up to a cubic polynomial in the plot size of each property.  All specifications control for neighborhood fixed effects, $\lambda_n$.  % \footnote{EVALUATE THIS SAMPLE LIMITATION?} 

Table~\ref{table:priceDDD_het} reports estimation results for all time periods  in columns (1) and (2) and separately by time after scheduled construction in columns (3) and (4).  Table~\ref{table:priceDDD_het} includes triple difference coefficients, $\beta_1$ which capture the differential price changes for properties between 0 and 500 meters from project boundaries before and after scheduled construction for constructed versus unconstructed projects.  With log-prices as an outcome, coefficients can be interpreted as the percentage change in prices associated with each treatment category.

\begin{table}
\small
\centering
\caption{Triple-Difference Estimates of Log-Prices 0 to 500 Meters Outside of Housing Projects}\label{table:priceDDD_het}
\vspace{-2mm}
\begin{threeparttable}
\begin{tabular}{lCCCC}
\toprule
 & \small (1) & \small (2) & \small (3) & \small (4)   \\ \midrule 
 \input{figures/price_time_full}
\bottomrule
\end{tabular}
\begin{tablenotes}
\item Estimates capture differential price effects for properties  0 to 500 meters outside of project boundaries relative to   properties 500 to 1,500 meters from boundaries before and   after scheduled construction for constructed and  unconstructed projects.  All estimates include neighborhood fixed effects.  Standard errors clustered at the project level in parenthesis. \,\,\, \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 
\end{tablenotes}
\end{threeparttable}
\end{table}

Column (1) of Table~\ref{table:priceDDD_het} documents a statistically insignificant 6.7\% decrease in housing prices, which shrinks to 5.7\% in column (2) after accounting for year-month fixed effects as well as up to a cubic polynomial in plot size.  Column (3) and (4) separate the price effect by years following scheduled construction.  Within 2 years of scheduled construction, price effects are small, slightly positive, and statistically insignificant.  Moving past two years from scheduled construction, effects increase in both size and statistical significance.  Column (4) indicates that prices drop by 12.6\% over 4 years after scheduled construction, which is statistically significant at the 95\% level.  These findings suggest that local housing markets may respond slowly to the introduction of nearby public housing projects.

Appendix~\ref{section:appendixpricerobust} examines pretrends by estimating effects both before and after scheduled construction.  Appendix Table~\ref{table:pricerobust} provides little evidence of significant pretrends; instead, the only statistically significant price effects occur over 2 years after project construction.  One concern with the empirical approach is that our method of imputing the expected month of project completion for planned, but unconstructed  may introduce noise into the estimates.  As a robustness exercise, columns (3) and (4) of Appendix Table~\ref{table:pricerobust} provides differences-in-differences estimates of price effects using only constructed projects and comparing properties near and far from project boundaries before and after construction.  Results from this exercise in columns (3) and (4) closely match corresponding triple-difference estimates in columns (1) and (2), providing support for our proxy for construction dates.



% Examining price effects by quartile of neighborhood income, we find that price effects become increasingly negative in higher quartile neighborhoods.  The poorest quartile (Q1) exhibits a small, statistically insignificant 3\% change in prices (column (2)) while the richest quartile (Q4) experiences a 17\% decrease in prices, which is statistically significant at the 5\% level.  Comparing columns (1) and (2), we find that additional controls have little impact on the magnitudes or statistical significance of the estimates.

% differential changes in prices before and after scheduled construction for constructed versus unconstructed projects non-parametrically according to distance to the nearest project boundary.  The strongest decreases in prices appear concentrated closest to project boundaries --- especially for the richest income quartile (Q4) --- although not all price gradients are monotonically increasing with distance to project boundaries.  

% To examine the dynamics of these price effects, Appendix~\ref{section:appendixpricetime} provides corresponding estimates of differential changes in prices for properties near versus far from project boundaries for constructed versus unconstructed projects non-parametrically by months to scheduled construction.  Estimates indicate some evidence of pretrends with prices declining in anticipation of project completion particularly for the bottom income quartile.  Pretrends are close to zero for the top two income quartiles.  Declines in prices occur sharply after scheduled construction and are most pronounced in the 48 months following scheduled construction for the top two income quartiles.




% Paragraph 
% COMPARE PRICE ESTIMATES TO DIAMOND PLEASE!





% \section{New MODEL DISCUSSION SECTION!!! }


\section{Modeling the Housing Market to Estimate Welfare Effects}\label{section:theory}

We develop a simple model of residential housing markets to capture the welfare effects of local housing projects within their neighborhoods.  This model infers welfare changes not only through changes in rents, but also through changes in the quantities of housing supplied.  

%%% motivate more from a broad welfare perspective

% Compare to Diamond's model! in writing;  mention time periods up front?!
% This model is static where households h
% Households and developers make choices independently each time period, which is consistent with mobile populations of households and high maintenance costs as well as low fixed construction costs per house.  

Each time period, developers choose how many formal and informal houses to construct and maintain on each plot of land as well as the level of rent for each house.  Each house can serve up to one household, and houses have identical quality.  Then households choose whether to rent a house receiving utility given by
\begin{align*}
U &= \delta_{hlt} - \lambda_{h}(k_{hjt}) - \theta R_{hjt}   + \epsilon_{hjt}  
\end{align*}
\noindent where $h$ indexes housing sector (either formal or informal), $l$ indexes location, $j$ indexes the specific land plot within location $l$, and $t$ indexes the time period.  $\delta_{hlt}$ indicates the amenity value of location, $l$ to housing sector, $h$ in time period, $t$.  $k_{hjt}$ measures the number of houses of a sector on the land plot.  $\lambda_{h}(k_{hjt})$ captures the congestion disutility from having multiple houses of the same sector on the same plot and is assumed to be increasing and convex in the number of houses per plot.   $\lambda_{h}(k_{hjt})$ is also assumed to be independent of the number of houses from another sector on the same plot, which assumes zero spillovers across sectors.    $R_{hjt}$ is the rent charged for each house on plot $j$ and $\theta$ measures the marginal disutility of rent.  $\epsilon_{hjt}$ is the plot and time-specific amenity shock.  The distribution of $\epsilon_{hjt}$ may be correlated across housing sectors to capture whether land plots that are suitable for formal housing may also be suitable for informal housing.  Households can also choose to live outside the city and receive reservation value, $\overline{U}$.  

This approach assumes that households have identical preferences across houses and locations, which implies that housing demand is perfectly elastic.  This assumption is consistent with households having low moving costs within the city as well as no idiosyncratic preferences for particular neighborhoods.  These assumptions may be reasonable in a context like South Africa where high levels of unemployment mean that different households face similar strong incentives to locate near employment centers.
 
Given household preferences, developers maximize profits for each housing sector by setting rents just high enough to ensure that households are indifferent between renting each house on plot $j$ and their reservation utility $\overline{U}$.  Developers are assumed to have full bargaining power, setting rents to extract all household surplus.  Profit-maximizing rents as a function of the number of houses on a plot is given by
\begin{align}
\label{eq:rent}
R_{hjt}^{*}(k_{hjt}) &= \frac{ \delta_{hlt} - \lambda_{h}(k_{hjt}) + \epsilon_{hjt} - \overline{U}}{\theta}
\end{align}
From a distributional perspective, this approach assumes that developers are able to extract all social surplus by setting rents relative to household reservation utility.  Although some households may also be developers, welfare for non-developer households remains unaffected by shifts in local amenities because any shifts are immediately capitalized into rents.  Without detailed measures of home ownership, this approach is unable to disentangle the distributional consequences of public housing policies across the population of households.

Given profit-maximizing rents, developers then choose how many houses to build on each plot by maximizing total profit per plot given by
\begin{align*}
max_{\,k_{hjt}} \,\,\,\,\,\,  k_{hjt} \, \Big[ \, R_{hjt}^{*}(k_{hjt}) - C_{hjt} \, \Big ]
\end{align*}
\noindent where the $C_{hjt}$ measures the cost of constructing and maintaining each house, which may vary based on location.

%and may depend on plot-specific features such as land slope, $C_{j} = c + \psi S_{j}$ where land slope is given by $S_{j}$.

When $\lambda(k_{hjt})$ is convex, the profit-maximizing number of houses in each sector, $k^{*}_{hjt}$ can be expressed as a function of the random amenity shock $\epsilon_{hjt}$ given by
\begin{align}
\label{eq:housingdemand}
\begin{split}
k_{hjt}^{*} &=
\begin{cases}
0 &\text{ if }\,\, \epsilon_{hjt} + V_{hjt} \leq \Lambda_{h}(1)  \\
% 1 &\text{ if }\,\,  H + \lambda(1)  < \epsilon_j \leq H  + 2\lambda(2) - \lambda(1)  \\
k &\text{ if }\,\,  \Lambda_{h}(k) < \epsilon_{hjt} + V_{hjt} \leq \Lambda_{h}(k+1)
\end{cases} \\
\text{ where }& \\
V_{hjt} & = \delta_{hlt}  - \theta C_{hjt}   \\
\Lambda_{h}(k) & =  k\lambda_{h}(k) - (k-1)\lambda_{h}(k-1) + \overline{U} \\
\lambda(0) & = 0 \,\, \text{ and } \lambda(.) \text{ is increasing and convex }
\end{split}
\end{align}
The profit-maximizing number of plots with houses and the number of houses per plot by sector are increasing in amenity values, $\delta_{hlt}$, decreasing in congestion disutility, $\Lambda_{h}(k)$, and decreasing in construction costs, $C_{hjt}$.  According to this framework, observed increases in the number of plots with houses and/or the number of houses per plot indicate an improvement in welfare holding constant reservation utility.  The variance of amenity shocks, $\epsilon_{hjt}$ may be interpreted as a measure of the sector-specific housing market elasticity.  

Given optimal rents in equation (\ref{eq:rent}) and optimal houses in equation (\ref{eq:housingdemand}), let the price of each plot equal profit for each plot as follows
\begin{align}
\label{eq:profits}
\begin{split}
P_{hjt}^{*}  &=
k_{hjt}^{*} \Big[ \frac{ \delta_{hlt} - \lambda_{h}(k_{hjt}^{*}) + \epsilon_{hjt} - \overline{U}}{\theta}  - C_{hjt}\Big] 
\end{split}
\end{align}
% \begin{cases}
% 0 &\text{ if }\,\, \epsilon_{hjt} + V_{hjt} \leq \Lambda_{h}(1)  \\
% % 1 &\text{ if }\,\,  H + \lambda(1)  < \epsilon_j \leq H  + 2\lambda(2) - \lambda(1)  \\
% k \Big[ \frac{ \delta_{hlt} - \lambda_{h}(k) + \epsilon_{hjt} - \overline{U}}{\theta}  - C_{hjt}\Big] &\text{ if }\,\,  \Lambda_{h}(k) < \epsilon_{hjt} + V_{hjt} \leq \Lambda_{h}(k+1)
% \end{cases} 

Like the profit-maximizing number of houses per plot, plot prices are increasing with local amenities, decreasing in congestion disutility, and decreasing in construction costs.  Plot prices fully capture social welfare in this framework because equilibrium rents ensure that household utility is always equal to reservation utility, leaving developers to enjoy all additional surplus. 

\subsection{Modeling Public Housing Projects}

Public housing projects enter the model by shifting housing costs and amenity values both within as well as nearby project footprints.  Let location index $l$ include whether plots fall within project footprints, $\textsc{\small Proj}$ or nearby spillover areas, $\textsc{\small Spill}$.  Similarly, let housing sector index $h$ include formal, $f$ and informal, $i$ housing sectors.

Housing projects allocate subsidies to local developers to construct houses within project footprints.  These subsidies directly lower formal housing construction costs in project footprints, $C_{f,\textsc{\small Proj,Post}}$.  These houses are then allocated to beneficiary households who can choose to live in these houses or rent them at efficient prices.  Housing projects also remove preexisting informal housing and rezone land for formal housing development, leaving limited land for new informal developments.  These practices may increase costs for informal housing, $C_{i,\textsc{\small Proj,Post}}$ in project footprints.

Housing projects may also affect local amenity values for formal housing, $\delta_{f,\textsc{\small Proj,Post}}$ and informal housing, $\delta_{i,\textsc{\small Proj,Post}}$ within project footprints.  Housing projects may boost local amenities by increasing access to piped water, electricity, and sewerage services while providing better roads and community centers.  

Housing projects may also have effects on amenities for neighboring areas just outside of project footprints.  On one hand, improvements in infrastructure in project footprints as well as greater densities of formal housing may provide positive amenities for surrounding neighborhoods, $\delta_{h,\textsc{\small Spill,Post}}$.  On the other hand, greater densities of backyard housing within projects as well as shifts toward lower income demographics in project areas may be perceived as negative amenities by surrounding housing markets, $\delta_{h,\textsc{\small Spill,Post}}$.  

Collapsing these effects into amenity and cost terms provides a reduced-form method of capturing the spillover effects of housing projects; however, this approach implies a series of restrictions on behavior.  First, the amenity and cost terms enter household utility linearly and independently of the number of houses per plot, which nests the assumption that the all households enjoy local amenities equally and independently of the density of neighboring housing.  This assumption does not allow for congestion costs from overusing public services.  Second, this approach imposes a limited structure for amenity externalities to extend across space:  amenities in project areas are allowed to affect amenities for spillover areas while amenities in all other areas are assumed to be spatially independent of each other.  

% This assumption is consistent with housing projects generating large, first-order changes that precipitate across neighborhoods while each individual's development decisions produce negligible externalities across neighborhoods.  Alternative approaches that explicitly model housing externalities across space would likely suffer from multiple equilibria as well as challenges for identification in this setting.\footnote{\cite{rossi2010housing} develop a model of spatial housing externalities over a single dimension, ``housing services'' where identification draws from the functional form of the housing externalities.  Our setting would require households to consider externalities across housing quantity as well as sectors.}

\subsection{Estimating Housing Demand}
% Borrowing the triple-difference framework from equation (\ref{eq:main}),
%  estimate housing demand, we capture the effects of housing projects on net amenities in project and spillover areas by first expressing net amenities ($V_{hjt} = \delta_{hlt}  - \theta C_{hjt}$) for constructed projects in the post period as

This theoretical framework allows us to estimate amenity values, construction costs, and congestion costs using variation in the observed number of houses across plots.  Given equation (\ref{eq:housingdemand}) and assuming that amenity shocks, $\epsilon_{hjt}$, are independently, normally distributed, we can express the probability of observing $k$ houses on a given plot of land as an ordered probit model:
\begin{align}
\label{eq:housingdemandprob}
\begin{split}
Pr[ k_{hjt}^{*} =0] \, = \, & \Phi \Bigg(\dfrac{\Lambda_{h}(1) - V_{hjt} }{\sigma_{h}} \Bigg)  \\
Pr[ k_{hjt}^{*} =k] \, = \, &  \Phi \Bigg(\dfrac{\Lambda_{h}(k+1) - V_{hjt} }{\sigma_{h}} \Bigg) - \Phi \Bigg(\dfrac{\Lambda_{h}(k) - V_{hjt} }{\sigma_{h}} \Bigg) \\
\end{split}
\end{align}
\noindent where $\Phi (.)$ represents the standard normal cumulative distribution function with standard deviation, $\sigma_{h}$.  In this framework, housing projects shift local net amenities, $V_{hjt} = \delta_{hlt}  - \theta C_{hjt}$, which affects incentives to construct houses. 

We express net amenities in terms of the triple-differences framework from equation (\ref{eq:main}), which allows us to control for differences in net amenities over time and between constructed and unconstructed project areas.  Let plot location, $j$, additionally index whether a plot is near a constructed project, $\textsc{Const}$, or unconstructed project and whether a plot falls within a project footprint or spillover area.  In this framework, net amenities for constructed projects in the post period can be specified as 
\begin{align}
\label{eq:netamenities}
\begin{split}
V_{h,\textsc{\{L,Const\},Post}} =& \, \overline{V}_{h,\textsc{\{L,Const\},Post}} + \overline{V}_{h,\textsc{Const,Post}} + \overline{V}_{h,\textsc{\{l,Const\} }}  + \overline{V}_{h,\textsc{l},\textsc{\small Post}} + \\
&\, \overline{V}_{h,\textsc{\small Const}}+ \overline{V}_{h,\textsc{\small Post}} + \overline{V}_{h,\textsc{l}}  + \overline{V}_h \\
\textsc{l} \in& \{\textsc{Proj},\textsc{Spill}\}
\end{split}
\end{align}
\noindent where $\overline{V}_h$ captures the portion of net amenities common to all areas and time periods.   $\overline{V}_{h,\textsc{l}} $  captures differential net amenities for project/spillover areas versus control areas, $\overline{V}_{h,\textsc{\small Post}} $ captures differential net amenities after relative to before scheduled construction, and $\overline{V}_{h,\textsc{\small Const}}$ captures differential net amenities in constructed compared to unconstructed project areas.  $\overline{V}_{h,\textsc{l},\textsc{\small Post}}$, $\overline{V}_{h,\textsc{\{l,Const\} }}$, and $\overline{V}_{h,\textsc{Const,Post}} $ further difference these terms according to location by time, location by construction status, and construction status by time respectively.  $\overline{V}_{h,\textsc{\{L,Const\},Post}}$ captures the effects of projects on net amenities under the assumption that any remaining variation in net amenities is uncorrelated with differential changes across location, time, and construction status. 

To translate net amenities into monetary terms, we propose estimating households' marginal disutility of rent, $\theta$, using variation in housing construction costs.  This approach leverages the prediction that the number of houses per plot is decreasing in construction costs at a rate of $\theta$.  To generate spatially precise variation in construction costs, we propose using land slope as a proxy for construction costs.  In this context, identification of $\theta$ requires assuming that steep land slopes only affect the number of buildings constructed through their effects on construction and maintenance costs and not through any direct effects on household utility from living in these locations.    

South Africa's National Construction Guidelines indicate that constructing homes on steep slopes with 6 to 12\% ($\geq12\%$) gradients increases infrastructure costs by 25\% (50\%) and building costs by 5\% (15\%) respectively.\footnote{See \cite{redbook}.}  On average, building costs equal 62\% of total construction costs and infrastructure costs equal 12\% (\cite{cahfcosts}).  To proxy for land slope using 200m elevation contour lines, we find the highest and lowest points in each 500$\text{m}^{2}$ square and divide their elevation difference by the euclidean distance between them.\footnote{Contour lines are provided by the National Geo-Spatial Information component of the Department of Rural Development and Land Reform of South Africa. }  The resulting dataset includes 9,770 squares of which 93\% have slopes of less than 6\%, 5\% have slopes between 6\% and 12\%, and the remaining 2\% have slopes greater than 12\%.  We assume that property values are roughly equal to total construction costs, consistent with a competitive market in property development (\cite{cahfcosts}).\footnote{To benchmark this value, a 2016 study by AECOM engineering estimates construction costs to be around R3,500 per square meter of floor space for the lower end of the housing market (\cite{aecom}).  Dividing construction costs by costs per square meter implies that the floor space of the average house in the low end of the housing market is around 66 m2, which is comparable to the 40 m2 of floor space available for each project house.  The Center for Affordable Housing Finance also estimates that the average construction cost for a fully serviced, 46 m2 house (with a 9 m2 balcony on a 120 m2 plot) in Pretoria is R336,000, which is also consistent with our estimate given that our data includes the bottom 20\% of the housing market.}  Within 1,500m of project footprints, the average property in the deeds data has a price of \input{figures/purch_price}Rand and an area of \input{figures/erf_size}$\text{m}^{2}$.  Scaling this price by the area of 25m by 25m plots, we assume an average construction cost of \input{figures/pmean}Rand per plot with less than 6\% land gradient.

To estimate demand across both informal and formal housing sectors, we further assume that the distribution of amenity shocks follows a bivariate normal distribution with a two-by-two variance matrix with diagonal terms capturing the variance of formal housing and informal housing and off-diagonal terms both measuring the correlation, $\rho$, between formal and informal amenity shocks in the same plot.  We allow the variance of amenity shocks to vary according to location, time, and construction cost in the same way as net amenities in equation (\ref{eq:netamenities}).  The frequency of plots with both formal and informal housing identify $\rho$, which may be interpreted as a reduced-form measure of the degree of complementarity between formal and informal housing sectors.  We also assume that amenity shocks are uncorrelated with all other determinants of household utility.  Disamenities from crowding, $\Lambda(k)$ are then identified from the distribution of the number of houses per plot given the bivariate normal distribution of amenity shocks.  We also normalize the outside option, $\overline{U}$, to zero. 

The bivariate distribution of amenities by housing sector implies that each plot has a joint probability of observing each combination of formal and informal houses, augmenting the ordered probit framework in equation (\ref{eq:housingdemandprob}) to form a seemingly unrelated bivariate ordered probit model.  This model is described by equation (\ref{eq:probfull}) in Appendix~\ref{appendix:likelihood}.  Parameters are recovered using maximum likelihood estimation according to the likelihood function given by equation (\ref{eq:demandll}) in Appendix~\ref{appendix:likelihood}.  This approach results in estimates that are normalized with respect to amenity variance terms since these terms are not separately identified in this framework.  The unit of analysis for the estimation is a 25m by 25m plot and the outcome variables are the counts of formal and formal houses on each plot in 2001 and 2012.  Outcome variables count the number of buildings from 0 to 9 with a last category indicating 10 or more buildings.  86\% of plot observations have zero formal buildings and 91\% have zero informal buildings.  Less than 0.05\% of plots have more than 10 total buildings.  Appendix Table~\ref{figure:buildhist} provides a histogram of building counts for plots with at least zero formal or informal houses.  

Parameter estimates are presented in Appendix Table~\ref{table:housingdemandestimates_full}.  Net amenities for formal housing increase statistically significantly in project areas while remaining unchanged in spillover areas.  For informal housing, net amenities experience statistically significance decreases in project areas and smaller, statistically insignificant decreases in nearby spillover areas.  Estimates of the marginal utility of rent, $\theta$, are similar across formal and informal sectors suggesting that higher costs of housing from steeply sloped land have similar impacts on housing construction across sectors.  Positive estimates of $\rho$ indicate that unobserved plot-specific amenities for formal and informal housing are positively correlated, which is likely driven by prevalent backyard housing.  

To compute the welfare effects of housing projects, we combine parameter estimates from Appendix Table~\ref{table:housingdemandestimates_full} with 10,000 randomly drawn amenity shocks to calculate changes in optimal rental values before and after project construction in project footprints and spillover areas.  Table~\ref{table:housingdemandestimates} provides the results of this exercise in terms of millions of Rands per project.  Inside project areas, we find that increases in welfare for formal housing markets are more than offset by decreases in welfare for informal markets.  In spillover areas 0-500m outside of footprints, both housing markets experience declines in welfare with declines for informal housing markets outpacing those for formal housing markets.  Bootstrapped standard errors find that none of the welfare estimates are statistically significant.  

Given \input{figures/con_proj_count}constructed projects, total welfare declines in the Johannesburg metro area are estimated to equal \input{figures/total_est_abs_bill}billion Rand (or \input{figures/total_est_abs_bill_usd}billion USD).  The 95\% confidence interval is ... On top of these welfare declines, national budget reports suggest an average cost per project of 25 million Rand, which implies an additional total welfare loss of 4.3 billion Rand (or 558 million USD).  

In order to compare results from this exercise to price effects from Section~\ref{section:resultsprices}, we calculate a decline in simulated rents for spillover areas equal to \input{figures/price_change_sim}\unskip\% (including both formal and informal houses), which closely mirrors price estimates from Table~\ref{table:priceDDD_het}.

% In total, these results suggest that housing projects generate an aggregate decline in welfare of 51 million Rand (6.6 million USD).
% (3.2 million USD)
% 3.2 million USD
% - Compare to price results


\begin{table}[h]
\centering
\caption{Welfare Effects per Project in Millions of Rands}\label{table:housingdemandestimates}
\vspace{-2mm}
\begin{threeparttable}
\begin{tabular}{lDD}
\toprule
   &   Formal Housing &  Informal Housing  \\ \midrule 
inside project & \input{figures/for_proj_est} & \input{figures/inf_proj_est} \\
& () & () \\
0-500m outside & \input{figures/for_spill1_est}& \input{figures/inf_spill1_est} \\
& () & () \\
\\
total & \multicolumn{2}{c}{  \input{figures/total_per_proj_est} } \\
                         & \multicolumn{2}{c}{  () } \\
% total & \multicolumn{2}{c}{  \input{figures/total_est} } \\
%                          & \multicolumn{2}{c}{  () } \\
\bottomrule
\end{tabular}
\begin{tablenotes}
\item \footnotesize Standard errors clustered at the project level in parenthesis. \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 \,\,  Estimates reflect 
\end{tablenotes}
\end{threeparttable}
\end{table}






% \begin{table}[h]
% \centering
% \caption{Net Amenity Estimates in Rands}\label{table:housingdemandestimates}
% \vspace{-2mm}
% \begin{threeparttable}
% \begin{tabular}{lDD}
% \toprule
%  &   Formal Housing &  Informal Housing \\ \midrule 
% % Net amenities: $( \delta_{hl} - \theta c^{u}_{hlt} )$ \\[.3em]
% inside project & \input{figures/for_proj_effect_e} & \input{figures/inf_proj_effect_e} \\
% 							& (\input{figures/for_proj_effect_v}\unskip) & (\input{figures/inf_proj_effect_v}\unskip) \\[.5em]
% 					%  & Project effect &
%  % & Baseline & \input{figures/for_proj_baseline_e} & \input{figures/inf_proj_baseline_e} \\
% 					% & 		& (\input{figures/for_proj_baseline_v}\unskip) & (\input{figures/inf_proj_baseline_v}\unskip) \\
% 0-500m outside & \input{figures/for_spill_effect_e} & \input{figures/inf_spill_effect_e} \\
% 							& (\input{figures/for_spill_effect_v}\unskip) & (\input{figures/inf_spill_effect_v}\unskip) \\[.7em]
%  % & Baseline & \input{figures/for_spill_baseline_e} & \input{figures/inf_spill_baseline_e} \\  & Project effect & 
% 					% & 		& (\input{figures/for_spill_baseline_v}\unskip) & (\input{figures/inf_spill_baseline_v}\unskip) \\
% % Correlation of amenity shocks: $\rho_{for,inf}$ & $0.620^{\text{a}}$ & \\[-.3em]
%  % & (0.018) & \\[.3em]
%  N & \multicolumn{2}{c}{ 6,143,756 }  \\
% \bottomrule\\[-.8em]
% %   Net amenities: $( \delta_{hl} - \theta c^{u}_{hlt} )$   
% % Implied amenity value net of housing costs in Rands: $\frac{1}{\theta_{for}}(\delta_{hl}- \theta_{for}c^{u}_{hlt})$ & & \\
% % inside project &\input{figures/for_proj} & \input{figures/inf_proj} \\
% % 0-500m outside &\input{figures/for_spill} & \input{figures/inf_spill} \\
% % \bottomrule\\[-.8em]

% % \multicolumn{3}{l}{ \footnotesize Standard errors clustered at the project level in parenthesis. \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 } \\[-.3em]
% % \multicolumn{3}{l}{ \footnotesize Outcome categories by plot and year include categories for formal and informal} \\[-.3em]
% % \multicolumn{3}{l}{ \footnotesize  building counts from 0 to 9 and a category at least 10.  Table~\ref{table:housingdemandestimates_full} includes the full set} \\[-.3em]
% % \multicolumn{3}{l}{ \footnotesize of coefficients.  Net amenities equal local amenities minus local housing costs. } \\[-.3em]
% \end{tabular}
% \begin{tablenotes}
% \item \footnotesize Standard errors clustered at the project level in parenthesis. \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 \,\,  Estimates reflect 
% \end{tablenotes}
% \end{threeparttable}
% \end{table}



% \begin{table}[h]
% \centering
% \caption{Housing Demand Estimates}\label{table:housingdemandestimates}
% \vspace{-2mm}
% \begin{tabular}{lDD}
% \toprule
%  &  Formal Housing &  Informal Housing \\ \midrule 
% Net amenities: $( \delta_{hl} - \theta c^{u}_{hlt} )$ \\[.3em]
% \input{figures/forimpcmp10_1}[.3em]
% \input{figures/forimpcmp10_2}
% \\
% Correlation of amenity shocks: $\rho_{for,inf}$ & $0.620^{\text{a}}$ & \\[-.3em]
%  & (0.018) & \\[.3em]
%  N & 6,143,756 & \\
% \bottomrule\\[-.8em]
% % Implied amenity value net of housing costs in Rands: $\frac{1}{\theta_{for}}(\delta_{hl}- \theta_{for}c^{u}_{hlt})$ & & \\
% % inside project &\input{figures/for_proj} & \input{figures/inf_proj} \\
% % 0-500m outside &\input{figures/for_spill} & \input{figures/inf_spill} \\
% % \bottomrule\\[-.8em]
% \multicolumn{3}{l}{ \footnotesize Standard errors clustered at the project level in parenthesis. \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 } \\[-.3em]
% \multicolumn{3}{l}{ \footnotesize Outcome categories by plot and year include categories for formal and informal} \\[-.3em]
% \multicolumn{3}{l}{ \footnotesize  building counts from 0 to 9 and a category at least 10.  Table~\ref{table:housingdemandestimates_full} includes the full set} \\[-.3em]
% \multicolumn{3}{l}{ \footnotesize of coefficients.  Net amenities equal local amenities minus local housing costs. } \\[-.3em]
% \end{tabular}
% \end{table}






% , $\epsilon_{hjt}$ for 
% formal and informal housing sectors follow a bivariate normal distribution with a two-by-two variance matrix $\Sigma$ with diagonal terms capturing the variance of formal housing, $\sigma_{for}^{2}$ and informal housing, $\sigma_{inf}^{2}$ and off-diagonal terms both capturing the correlation, $\rho$ between formal and informal amenity shocks in the same plot.  We also assume that amenity shocks are uncorrelated with all other determinants of household utility: local amenities net of housing costs, $V_{hlt}$, disamenities from crowding, $\Lambda(k)$, as well as reservation utility, $\overline{U}$. 


% \begin{align*}
% Pr[ k_{for,jt}^{*} =k_{for} , k_{inf,jt}^{*} =k_{inf} ] \, = \, &  \Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}+1) - \overline{V}_{for,jt} - \theta c^{o}_{j}}{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}+1) - \overline{V}_{inf,jt} - \theta c^{o}_{j}}{\sigma_{inf}} , \rho \Bigg) \\
% - \, &\Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}) - \overline{V}_{for,jt} - \theta c^{o}_{j}}{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}+1) - \overline{V}_{inf,jt} - \theta c^{o}_{j}}{\sigma_{inf}} , \rho \Bigg) \\
% - \, &\Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}+1) - \overline{V}_{for,jt} - \theta c^{o}_{j}}{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}) - \overline{V}_{inf,jt} - \theta c^{o}_{j}}{\sigma_{inf}} , \rho \Bigg) \\
% + \, &\Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}) - \overline{V}_{for,jt} - \theta c^{o}_{j}}{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}) - \overline{V}_{inf,jt} - \theta c^{o}_{j}}{\sigma_{inf}} , \rho \Bigg) \\
% \end{align*}




% : local amenities net of housing costs, $V_{hlt}$, disamenities from crowding, $\Lambda(k)$, as well as reservation utility, $\overline{U}$

% While this approach provides a spatially precise measure of construction costs, this assumption may be violated to the extent that households have particular preferences for living on sloped land.


% To benchmark construction costs, we assume that out of total construction costs, 62\% is attributable to building costs while 12\% is attribute to infrastructure costs on average.
% rely on recent research from the Center for Affordable Housing and Finance (CAHF) in Pretoria, which estimates that out of total construction costs, around 62\% is attributable to building costs while around 12\% is attribute to infrastructure costs (\cite{cahfcosts}).  

% With data on the number of structures in each plot, this parameterization allows us to find net amenity values that maximize the probability of observing a given number of structures on each plot according to equation (\ref{eq:housingdemandprob}).  However, net amenity estimates capture the relative desirability of different locations without measuring household willingness-to-pay in monetary terms.  


% To leverage housing cost variation, we divide housing costs into an unobserved portion, $c^{u}_{hlt}$ that varies at the location level and an observed portion, $c^{o}_{j}$ so that total costs are $C_{hjt} =  c^{o}_{j}+ c^{u}_{hlt}$.  To measure the welfare effects of local housing projects, let $ \overline{V}_{hlt}$ equal the amenity value net of unobserved housing costs, $(\delta_{hlt}- \theta c^{u}_{hlt} )$, which may vary over time, project construction status, and location in the following triple-differences framework




% Under these assumptions, $\alpha^{Vh}_1$ and $\beta^{Vh}_1$ measure the causal effects of housing projects in an analogous way to equation (\ref{eq:main}).  $\theta$ measures the marginal utility of income from observed variation in housing costs.  As described in Section~\ref{section:data}, we proxy for observed housing costs using average land slope because steep land slopes increase the costs of home construction.  



% \begin{align}
% \label{eq:demandllsimple}
% LL = \sum_{t=1}^{T} \sum_{j=1}^{J} \sum_{m=1}^{K} \mathbbm{1} \{k_{k,jt} = m\} \,\,\, log \Big( Pr[ k_{h,jt}^{*} =k ] \Big)
% \end{align}
% \noindent where $J$ is the total number of plots observed, $T$ is the total number of time periods, and $K_{for}$ and $K_{inf}$ are the maximum observed number of formal and informal houses observed per plot.  




% \subsection{Estimating Housing Demand}


% The triple-difference approach also provides a useful framework for estimating residential housing demand given by equation (\ref{eq:housingdemand}).  Our empirical setting allows us to identify the causal effect of housing projects on local amenities net of unobserved housing costs.  Variation in housing costs also identify the marginal utility of income, which helps translate amenity effects of housing projects into monetary welfare estimates.




\section{Discussion and Conclusion}\label{section:discussion}


Our results provide a framework for evaluating whether housing projects succeed in attaining three broad goals of South African housing policy as articulated in the National Housing Act of 1997.

As a first goal, ``every municipality must... ensure that the inhabitants of its area of jurisdiction have access to adequate housing on a progressive basis.''\footnote{See \cite{housingact}.}  Our results provide evidence that housing projects boost the quantity and quality of dwellings available to households within project footprints.  Building density estimates find increases in formal housing with no changes in total informal housing, reinforcing census estimates that document improvements in infrastructure access and housing quality.

As a second goal, ``government must use public money available for housing development in a manner which stimulates private investment in, and the contributions of individuals to, housing development.''\footnote{Ibid.}    We find little evidence that housing projects are able to attract local investment in housing markets within and outside of their footprints.  Instead, formal housing growth nearby remains unchanged while prices for formal houses drop especially in relatively higher income areas.

Finally as a third goal, ``government must promote the establishment, development and maintenance of socially and economically viable communities and of safe and healthy living conditions to ensure the elimination and prevention of slums and slum conditions.''\footnote{Ibid.}  We find mixed support for this goal.  On one hand, growth in nearby informal housing slows as a result of housing projects, which supports this goal to the extent that informal houses reflect government criteria for slum conditions.  On the other hand, housing projects are unable to slow growth in informal houses within project footprints.  Instead, backyard shacks replace preexisting informal houses.  Our model of the housing market suggests that net reductions in informal housing translate into substantial decreases in social welfare.  

One mechanism may be that housing projects are not designed to accommodate large influxes of informal backyard housing.  Backyard housing residents may place extra strain on local public services and lead to high population densities that recreate congested slum conditions.  Local government agencies have only recently begun to consider backyard housing growth explicitly in their program design, which may help to mitigate negative spillover effects from these projects.\footnote{ See the Spatial Development Framework of the \cite{sdf} which emphasizes that ``Acknowledging the role of backyard rental accommodation in the City and implementing strategies to legitimise it and ensuring minimum safety and health standards, as well as allowing additional subsidiary dwelling units across the city within its existing built-up footprint, will also contribute to providing more affordable accommodation throughout the city in serviced areas'' (p.140).}  Taken together, our results suggests that housing projects as currently designed may be unlikely to provide a cost-effective policy for slum reduction. 

Our results also provide broader lessons for considering informal housing markets in the design of place-based policies in developing countries.  We find that the supply of informal housing may be particularly responsive to place-based policies.  While projects generate price decreases in formal housing markets for high-income areas just as in developed country settings (\cite{diamond2016wants}), informal markets experience reductions in the quantity of dwellings.  In future research, housing quantity data may complement formal housing price data for measuring the total welfare impacts of these policies.  

Active informal housing markets also allow for the spillover effects of housing projects to extend not only just outside of project footprints, but also within project footprints.  We document substantial construction of informal houses in the backyards of project houses, which leave the total number of informal houses unchanged after project construction.  To measure the spillover effects of place-based policies, researchers and policymakers have largely focused on changes outside of policy footprints, treating any changes within these footprints as exogenously driven by the policies (\cite{diamond2016wants}, \cite{rossi2010housing}, \cite{hornbeck2017creative}).  Our analysis suggests that future research of place-based policies in developing contexts may benefit broadening the area of analysis to include outcomes in the project footprints themselves.

This analysis abstracts away several features that may provide a more nuanced understanding of the welfare effects of housing projects.  First, we do not directly model housing externalities, which may be especially salient in slum areas.  Poor sanitation, crime, and congested infrastructure may each depend differently on the quantity and quality of nearby houses, which may be affected by local housing projects (\cite{marxthere}).  Precise data on these outcomes would allow for disentangling the importance of each of these channels for the total welfare effects of these policies.  Second, we abstract away from any potential interactions between housing projects and local labor markets.  Housing projects may generate local agglomeration economies:  housing projects increase the supply of local labor, which may induce firms to locate nearby these projects.  Finally, without panel data on households over time, we are unable to provide a precise accounting of policy effects on individual households as well as the overall distributional consequences of housing policies in this context.  Instead, our estimates are constrained to considering aggregate social welfare.


\pagebreak

\nocite{*}
\singlespacing
\setlength{\bibsep}{7pt}
\bibliographystyle{abbrvnat}
\bibliography{ref}



\pagebreak
% APPENDIX 
\appendix
\doublespacing

\section{Appendix}

\titleformat*{\subsection}{\centering\normalsize\bfseries}


\begin{figure}[t]
\caption{Transaction Price Histogram}\label{figure:transactionhist}
\centering
\includegraphics[scale=.4,trim={0cm 0cm -1cm 0cm}]{figures/summary_pricedist.pdf}
\\
\footnotesize{Note: Transactions are censored at R100,000.}
\end{figure}


\subsection{Project Descriptions}\label{appendix:projectdescriptions}

\begin{table}[ht!]
\centering
\caption{Project Descriptions}\label{table:projectdescriptions}
\vspace{-2mm}
\begin{tabular}{l*{1}{c}}
\toprule
 &Counts  \\
\midrule
\textbf{Constructed} & \\[.5em]
\input{figures/proj_con_table}[.5em]
\input{figures/proj_con_table_total}[.5em]
\textbf{Unconstructed} & \\[.5em]
\input{figures/proj_uncon_table}[.5em]
\input{figures/proj_uncon_table_total}[.5em]
\textbf{Other} \\[.5em]
\input{figures/other_table}[.5em]
\input{figures/other_table_total}[.5em]
\midrule
\input{figures/proj_table_total}[.5em]
\bottomrule
\end{tabular}
\end{table}



\subsection{String Matching for Project Names and Delivery Dates }
\label{appendix:stringmatch}


We then use a fuzzy-string matching algorithm with bigrams to link project names from the budget reports to the administrative maps.  We keep all matches with over 60\% similarity, with 37 projects matching exactly.  Appendix~\ref{table:stringmatch} compares unmatched and matched projects finding that matched projects have much higher numbers of project houses, lower nearby housing prices, and are further from the central business district compared to unmatched projects.  One reason may be that the budget reports only include larger, more expansive projects, which are likely to take place further from city centers. 


\vspace{0mm}
\begin{table}[ht!]
\centering
\caption{Assessing Name Matching between Budget Reports and Administrative Project Records}\label{table:stringmatch}
\vspace{0mm}
\begin{tabular}{l*{1}{cccc}}
\toprule
  & \multicolumn{2}{c}{\textbf{Matched}}& \multicolumn{2}{c}{\textbf{Unmatched}}    \\
  &Const. & Unconst. &Const. & Unconst.  \\
\midrule
\input{figures/score_tablet_4}
\bottomrule
\multicolumn{5}{l}{\scriptsize Const. refers to constructed projects and unconst. refers to unconstructed projects.}\\[-.5em]
\multicolumn{5}{l}{\scriptsize $^*$Calculated from {\it expected} completion dates using Gauteng National Treasury budget reports.}\\[-.5em]
\multicolumn{5}{l}{\scriptsize $^\dagger$ The USD averaged to about 7.70 Rands during the 2001-2011 period.}\\[-.5em]
\multicolumn{5}{l}{\scriptsize $^\ddagger$Measured as the average minimum distance with respect to Johannesburg and Pretoria CBDs. } \\[-.5em]
\end{tabular}
\end{table} 



\subsection{Transaction Frequency}
\label{appendix:histfreq}
\vspace{-5mm}
\begin{figure}[ht!]
\centering
\includegraphics[scale=.4 , trim={.2cm 0.2cm .2cm 0.2cm},clip]{figures/summary_densitytime.pdf}
\end{figure}

\subsection{Project counts}
\label{appendix:projectcounts}
\vspace{-5mm}
\begin{figure}[ht!]
\centering
\includegraphics[scale=1.2,trim={.1cm 1.2cm .1cm 1.2cm},clip]{figures/projectcounts_4.pdf}
\end{figure}



\begin{table}[h!]
	\centering
	\caption{Mean Census Characteristics in the Pre-Period}\label{table:projectdescriptivescensus}
\vspace{-2mm}
\begin{threeparttable}
\begin{tabular}{l*{1}{ccc}}
\toprule
& Constructed & Unconstructed & All Census Blocks \\
\midrule
\input{figures/census_at_baseline_AGG_4} 
\bottomrule
\end{tabular}
\begin{tablenotes}
\item \footnotesize Data are from the 1996 and 2001 Censuses of Population and Housing.
``Constructed'' and ``Unconstructed'' include census blocks with over 50\% 
 area overlap with constructed and unconstructed projects respectively. 
``All''  includes all blocks.  Means are weighted by land area.
\end{tablenotes}
\end{threeparttable}
\end{table}


\begin{table}[ht!]
\small
\centering
\caption{Triple Difference Estimates of Housing Density }\label{table:bbluDDDfull}
\vspace{-2mm}
\resizebox{1\linewidth}{!}{
\begin{threeparttable}
\begin{tabular}{lCCCCC}
\toprule
& \small (1) & \small (2) & \small (3) & \small (4) & \small (5) \\
 & \small Total Housing & \small Formal Housing & \small Informal Housing & \small Informal Backyard Housing & \small Informal Non-Bkyd. Housing \\ \midrule 
\input{figures/b_ksp_o0_d250_500}
\bottomrule
\end{tabular}
\begin{tablenotes}
\item \footnotesize Standard errors clustered at the project level in parenthesis. \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 \,\,
Project areas are 25$\times$25m grid cells within 1,500m of project footprints.
Housing densities are measure in terms of houses per $\text{km}^{2}$.
``inside'' means within project footprint.  ``constr'' means constructed.
\end{tablenotes}
\end{threeparttable}
}
\end{table}


\begin{table}[ht!]
\small
\centering
\caption{Full Census Estimates}\label{table:censusestimatesfull}
\vspace{-2mm}
% \resizebox{1\linewidth}{!}{
\begin{threeparttable}
\begin{tabular}{lDDDD}
\toprule
 & \small (1) & \small (2)  & \small (3) & \small (4) \\
& \small Has Piped Water Indoors  & \small Has a Flush Toilet  & \small Has Electricity & \small Total Rooms  \\ \midrule
\input{figures/ch1_ksp_o0_d250_500_bb1} 
% \input{figures/census_hh_DDregs_AGG}
\bottomrule
\end{tabular}
\begin{tablenotes}
\item Standard errors clustered at the project level in parenthesis.\textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01
Outcomes in Columns (1), (2), and (3) are indicator variables.
Specifications include census 2001 subplace fixed effects.
Results are weighted by unit area and control for up to a cubic in unit area by time. 
``HH'' stands for household and ``HoH'' stands for head of household.
\end{tablenotes}
\end{threeparttable}
% }
\end{table}



\begin{table}[ht!]
\small
\centering
\caption{Census Demographic  Estimates}\label{table:censusestimatesfull2}
\vspace{-2mm}
\resizebox{1\linewidth}{!}{
\begin{threeparttable}
\begin{tabular}{lDDDDDD}
\toprule
 & \small (1) & \small (2)  & \small (3)  & \small (4) & \small (5)  & \small (6)  \\
 & \small HH Size & People per $\text{km}^{2}$ & Age HoH & HoH is African  & HoH is Employed  & HH Log Income \\ \midrule
\input{figures/ch2_ksp_o0_d250_500_bb1}
\bottomrule
\end{tabular}
\begin{tablenotes}
\item \footnotesize Standard errors clustered at the project level in parenthesis.\textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 \,\,
Outcomes in Columns (4) and (5) are indicator variables.
Specifications include census 2001 subplace fixed effects.
Results are weighted by unit area and control for up to a cubic polynomial in unit area by time.  ``HH'' stands for household and ``HoH'' stands for head of household.
\end{tablenotes}
\end{threeparttable}
}
\end{table}



\subsection{Full Housing Demand Estimates}



\begin{table}[h]
\centering
\caption{Full Housing Demand Estimates}\label{table:housingdemandestimates_full}
\vspace{-2mm}
\resizebox*{!}{.97\textheight}{
\begin{tabular}{lDD}
\toprule
 &  Formal &  Informal \\ \midrule 
 net amenities: $\overline{V} = ( \overline{\delta}_{hl} - \theta \overline{C}_{hlt} )$ \\[.3em]
\input{figures/forimpcmp10_1_full}[.3em]
\input{figures/forimpcmp10_2_full}[.5em]
\input{figures/forimpcmp10_3_1_full}
\input{figures/forimpcmp10_3_2_full}
\input{figures/forimpcmp10_3_3_full}
\input{figures/forimpcmp10_3_4_full}
\input{figures/forimpcmp10_3_5_full}
\input{figures/forimpcmp10_3_6_full}
\input{figures/forimpcmp10_3_7_full}
\input{figures/forimpcmp10_3_8_full}
\input{figures/forimpcmp10_3_9_full}
\input{figures/forimpcmp10_3_10_full}[.3em]
% \input{figures/forimpcmp10_3_6_full}
correlation of amenity shocks: $\rho_{for,inf}$ & $0.620^{\text{a}}$ & \\
 & (0.018) & \\[.3em]
 N & 6,143,756 & \\
\bottomrule\\[-.6em]
\multicolumn{3}{l}{ \footnotesize Standard errors clustered at the project level in parenthesis. \textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 } \\[-.3em]
\multicolumn{3}{l}{ \footnotesize Outcome categories by plot and year include categories for formal and informal} \\[-.3em]
\multicolumn{3}{l}{ \footnotesize  building counts from 0 to 9 and a category at least 10.  Table~\ref{table:housingdemandestimates_full} includes the full set} \\[-.3em]
\multicolumn{3}{l}{ \footnotesize of coefficients.  Net amenities equal local amenities minus local housing costs. } \\[-.3em]
\end{tabular}
}
\end{table}




\subsection{Pre-Trends for Price Estimates}\label{section:appendixpricerobust}

To examine dynamics of price effects especially in terms of pretrends, we estimate effects with respect to months to the (expected) construction month of each project using the following specification:
\begin{align}
\label{eq:pricerobust}
\begin{split}
\quad y_{ipnt} \, =&   \, \beta_1 \, \textsc{\small Spill}_{i}\times\textsc{\small Const}_{p} \, + \, \beta_2 \, \textsc{\small Spill}_{i} \, + \, \beta_3 \, \textsc{\small Const}_{p}\,  \\
 &\, + \sum_{l=1}^{9} T_{l} \, \Big( \, \alpha_1^{l} \, \textsc{\small Spill}_{i}\times\textsc{\small Const}_{p} \, + \, \alpha_2^{l} \, \textsc{\small Spill}_{i} \, + \, \alpha_3^{l} \, \textsc{\small Const}_{p}\, +\, \alpha_4^{l} \Big) \,  \\
&\, + \, \theta \, X_{ipnt} \, + \, \lambda_n \, + \, \varepsilon_{ipnt} \quad \\
\text{Where }& \\
&T_1 = \mathbbm{1} \Big\{\, t \leq -48  \,\Big\} \,, \,\,\, T_2 = \mathbbm{1} \Big\{ -48 \leq t < -36 \Big\} \,, \,\,\, T_3 = \mathbbm{1} \Big\{ -36 \leq t < -24 \Big\} \,\,, \\
&T_4 = \mathbbm{1}  \Big\{ -24 \leq t < -12 \Big\} \,, \,\,\, T_5 = \mathbbm{1} \Big\{ 0 \leq t < 12 \Big\} \,, \,\,\, T_6 = \mathbbm{1} \Big\{ 12 \leq t < 24 \Big\} \,\,, \\
&T_7 = \mathbbm{1} \Big\{ 24< t<=36 \Big\} \,\, ,\,\,T_8\,=\,\mathbbm{1} \Big\{ 36< t <=48 \Big\} \, , \,\,\, T_9 = \mathbbm{1} \Big\{ 48 \leq t \Big\} 
\end{split}
\end{align}
\noindent where $\textsc{\small Spill}_{i}$ is an indicator for properties within 500 meters outside of a project boundary and $\textsc{\small Const}_{p}$ is an indicator for being nearby a project that is successfully constructed.  $t$ indexes months to scheduled construction with the scheduled construction month normalized to zero.  Differential prices near and far from constructed projects compared to unconstructed projects are estimated separately according to years to scheduled construction relative to the year before scheduled construction.  This specification leaves transactions occurring in the 12 months immediately before scheduled construction as the omitted category.  Coefficient, $\beta_1$ captures differential changes in log-prices near and far from constructed and unconstructed projects across all time periods.  The coefficients of interest, $\alpha_1^{l}$ track how prices change differentially in the 9 time windows relative to the omitted category --- 12 months before scheduled construction.  Additional controls $X_{ipnt}$ include up to a cubic polynomial in the lot size of properties as well as a fixed effects for the year-month of each transaction.  The specification also includes neighborhood fixed effects $\lambda_n$.  

As a robustness exercise, we also estimate a differences-in-differences specification that compares transactions before and after scheduled construction near and far from projects.  This specification is equal to equation (\ref{eq:pricerobust}) omitting terms with $\textsc{\small Const}_{p}$.  

\begin{table}
\small
\centering
\caption{Log-Price Estimates 0 to 500 Meters Outside of Housing Projects According to Time to Scheduled Construction }\label{table:pricerobust}
\vspace{-1mm}
\begin{threeparttable}
\begin{tabular}{lCCCC}
\toprule
 & \small (1) & \small (2) & \small (3) & \small (4)   \\ 
  & \small Triple Diff & \small Triple Diff &\small Diff-in-Diff & \small Diff-in-Diff \\ \midrule 
 \input{figures/price_time_robustness} \bottomrule
\end{tabular}
\begin{tablenotes}
\item \footnotesize Estimates capture differential price effects for properties  0 to 500 meters outside of project boundaries relative to   properties 500 to 1,500 meters from boundaries before and after scheduled construction.  Income quartiles are from average household 2001 incomes in census 2001 subplaces.  All estimates include neighborhood fixed effects.  Standard errors clustered at the project level in parenthesis.\textsuperscript{c} p$<$0.10,\textsuperscript{b} p$<$0.05,\textsuperscript{a} p$<$0.01 
\end{tablenotes}
\end{threeparttable}
\end{table} 

\subsection{Building Histogram}\label{section:appendixbuildhist}


\begin{figure}[!htb]
      {  \centering
   \caption[ Histogram of Buildings per Plot with at least 1 Building ]
    {\small Histogram of Buildings per Plot with at least 1 Building }\label{figure:buildhist} 
\includegraphics[width=\textwidth,trim={0.3cm .3cm 0.1cm 0cm}, clip=true]{figures/building_hist.pdf}
Plots with zero buildings are not shown.  86\% of plots have zero formal houses, and 91\% of plots have zero informal houses.
This figure also excludes plots with over 15 buildings, which compose less than 0.001\% of the sample.
}
\end{figure}

\subsection{Full Marginal Probability and Likelihood Function for Demand Estimation}\label{appendix:likelihood}

The probability of observing a given number of formal and informal houses per plot according to equation (\ref{eq:housingdemand}) can be written in terms of a seemingly unrelated bivariate ordered probit model as follows \citep{sajaia2008maximum}
\begin{align}
\label{eq:probfull}
\begin{split}
Pr[ k_{for,jt}^{*} =k_{for} , k_{inf,jt}^{*} =k_{inf} ] \, = \, &  \Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}+1) -V_{for,jt} }{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}+1) - V_{inf,jt}}{\sigma_{inf}} , \rho \Bigg) \\
- \, &\Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}) - V_{for,jt} }{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}+1) - V_{inf,jt} }{\sigma_{inf}} , \rho \Bigg) \\
- \, &\Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}+1) - V_{for,jt}}{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}) - V_{inf,jt}}{\sigma_{inf}} , \rho \Bigg) \\
+ \, &\Phi_2\Bigg(\dfrac{\Lambda_{for}(k_{for}) - V_{for,jt} }{\sigma_{for}}, \dfrac{\Lambda_{inf}(k_{inf}) - V_{inf,jt} }{\sigma_{inf}} , \rho \Bigg) \\
\end{split}
\end{align}
\noindent where $\Phi_{2}(.)$ indicates a standard normal bivariate distribution with correlation terms, $\rho$.  This expression can be estimated by maximizing the following log-likelihood function

The likelihood of observing a given dataset with formal and informal structures on each plot is given by
\begin{align}
\label{eq:demandll}
LL = \sum_{t=1}^{T} \sum_{j=1}^{J} \sum_{m_{for}=1}^{K_{for}} \sum_{m_{inf}=1}^{K_{inf}} \mathbbm{1} \{k_{for,jt} = m_{for}, k_{inf,jt} = m_{inf}\} \,\,\, log \Bigg( Pr[ k_{for,jt}^{*} =k_{for} , k_{inf,jt}^{*} =k_{inf} ] \Bigg)
\end{align}
\noindent where $J$ is the total number of plots observed, $T$ is the total number of time periods, and $K_{for}$ and $K_{inf}$ are the maximum observed number of formal and informal houses observed per plot.  


\end{document}


